import e from"reversible-map";class t{constructor(e,t,s){this.name=void 0,this.code=void 0,this.message=void 0,this.info=void 0,this.name="Cityworks Exception",this.code=e,this.message=t,void 0!==s&&(this.info=JSON.stringify(s))}}const s=require("lodash");class r{constructor(e){this.cw=void 0,this.cw=e}notifications(){return new Promise((e,t)=>{this.cw.runRequest("General/ActivityNotification/User",{}).then(t=>{e(t.Value)})})}amIWatching(e,s){return new Promise((r,i)=>{let n={null:0,case:1,task:2};void 0===n[e]?i(new t(1,"Activity type provided does not exist.",{provided:e,potential_activities:n})):this.cw.runRequest("General/ActivityNotification/UserWatching",{ActivityType:n[e],ActivityId:s}).then(e=>{r(e.Value)}).catch(e=>{i(new t(2,"Unknown error."))})})}quickSearch(e){return new Promise((t,s)=>{this.cw.runRequest("General/QuickSearch/QuickSearch",{QuickSearchText:e}).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}getActivityMetadataByIds(e,r){return new Promise((i,n)=>{let o=["INSPECTION","REQUEST","WORKORDER"];-1==s.indexOf(o,r)&&n(new t(2,"TableName provided does not exist or is mispelled.",{provided:r,available:o})),this.cw.runRequest("General/CwMetaData/ByTableNameSids",{Ids:e,TableName:r}).then(e=>{console.log(e),i(e.Value)}).catch(e=>{n(e)})})}getWOEntityCostSummary(e){return new Promise((t,s)=>{this.cw.runRequest("General/CostSummary/WorkOrderEntity",{ObjectIds:e}).then(e=>{console.log(e),t(e.Value)}).catch(e=>{s(e)})})}searchWOEntityCostSummary(e){return new Promise((t,s)=>{this.cw.runRequest("General/CostSummary/WorkOrderEntitySearch",{SearchId:e}).then(e=>{console.log(e),t(e.Value)}).catch(e=>{s(e)})})}}const i=require("lodash");class n{constructor(t){this.activityTypes=void 0,this.linkTypes=void 0,this.cw=void 0,this.cw=t,this.activityTypes=new e,this.activityTypes.set("null",0),this.activityTypes.set("case",1),this.activityTypes.set("inspection",2),this.activityTypes.set("request",3),this.activityTypes.set("workorder",4),this.activityTypes.set("wipcase",5),this.linkTypes=new e,this.linkTypes.set("null",0),this.linkTypes.set("parent",1),this.linkTypes.set("related",2)}add(e,s,r,i,n="related"){return new Promise((o,a)=>{this.activityTypes.has(e)||a(new t(1,"Source type not found.",{provided:e,options:this.activityTypes})),this.activityTypes.has(r)||a(new t(2,"Destination type not found.",{provided:r,options:this.activityTypes})),this.linkTypes.has(n)||a(new t(3,"Link type not found.",{provided:n,options:this.linkTypes}));let u={SourceType:this.activityTypes.get(e),SourceSid:s,DestType:this.activityTypes.get(r),DestSid:i,LinkType:this.linkTypes.get(n)};this.cw.runRequest("General/ActivityLink/Add",u).then(e=>{o(e.Value)})})}get(e,s){return new Promise((r,n)=>{this.activityTypes.has(e)||n(new t(4,"Activity type not found.",{provided:e,options:this.activityTypes}));let o={ActivityType:this.activityTypes.get(e),ActivitySids:s},a=this;this.cw.runRequest("General/ActivityLink/ByActivitySids",o).then(e=>{let t=new Array;i.forEach(e.Value,(e,s)=>{e.DestType=a.activityTypes.get(e.DestType),e.SourceType=a.activityTypes.get(e.SourceType),e.LinkType=a.linkTypes.get(e.LinkType),t.push(e)}),r(t)})})}clone(e,s,r,i){return new Promise((n,o)=>{this.activityTypes.has(e)||o(new t(1,"Source type not found.",{provided:e,options:this.activityTypes})),this.activityTypes.has(r)||o(new t(1,"Destination type not found.",{provided:r,options:this.activityTypes}));let a={SourceActivityType:this.activityTypes.get(e),SourceActivitySid:s,DestinationActivityType:this.activityTypes.get(r),DestinationActivitySid:i};this.cw.runRequest("General/ActivityLink/CloneByActivitySid",a).then(e=>{n(e.Value)})})}delete(e){return new Promise((t,s)=>{this.cw.runRequest("General/ActivityLink/Delete",{ActivityLinkId:e}).then(e=>{t(e.Value)})})}remove(e,s,r,i,n="related"){return new Promise((o,a)=>{this.activityTypes.has(e)||a(new t(1,"Source type not found.",{provided:e,options:this.activityTypes})),this.activityTypes.has(r)||a(new t(1,"Destination type not found.",{provided:r,options:this.activityTypes})),this.linkTypes.has(n)||a(new t(1,"Link type not found.",{provided:n,options:this.linkTypes}));let u={SourceType:this.activityTypes.get(e),SourceSid:s,DestType:this.activityTypes.get(r),DestSid:i,LinkType:this.linkTypes.get(n)};this.cw.runRequest("General/ActivityLink/Remove",u).then(e=>{o(e.Value)})})}}require("lodash");class o{constructor(e){this.cw=void 0,this.cw=e}getConfig(e,t,s=!0,r=[]){return new Promise((t,s)=>{e=e.toLowerCase(),this.cw.runRequest("Gis/MapService/Domain",{}).then(e=>{t(e.Value)})})}domain(e,t=!0){return new Promise((e,t)=>{this.cw.runRequest("Gis/MapService/Domain",{}).then(t=>{e(t.Value)})})}downloadMobile(e,t=!0){return new Promise((e,t)=>{this.cw.runRequest("Gis/MapService/DownloadMobileMapCache",{}).then(t=>{e(t.Value)})})}initialExtent(){return new Promise((e,t)=>{this.cw.runRequest("Gis/MapService/InitialExtent",{}).then(t=>{e(t.Value)})})}request(e,t=!0){return new Promise((e,t)=>{this.cw.runRequest("Gis/MapService/ServiceRequestConfiguration",{}).then(t=>{e(t.Value)})})}inspection(e,t=!0){return new Promise((e,t)=>{this.cw.runRequest("Gis/MapService/InspectionConfiguration",{}).then(t=>{e(t.Value)})})}workOrder(e,t=!0){return new Promise((e,t)=>{this.cw.runRequest("Gis/MapService/WorkOrderConfiguration",{}).then(t=>{e(t.Value)})})}user(e=[],t=!0,s=!0,r=!0){return new Promise((e,t)=>{this.cw.runRequest("Gis/MapService/User",{}).then(t=>{e(t.Value)})})}selectedEntities(){return new Promise((e,t)=>{this.cw.runRequest("General/AppData/SelectedEntities",{}).then(t=>{e(t.Value)})})}}const a=require("lodash");class u{constructor(e){this.cw=void 0,this.status=void 0,this.hook_types=void 0,this.cw=e,this.status={Pending:0,Processing:1,Complete:2,Failed:3},this.hook_types={Unknown:0,ActivityUpdate:1,Email:2,WebHook:3}}processMessages(e,t=!1){return new Promise((s,r)=>{this.cw.runRequest("General/WebHookEvent/ProcessMessages",{Ids:e,Delete:t}).then(e=>{})})}get(e,s,r=15){return new Promise((i,n)=>{void 0===this.status[s]&&n(new t(1,"Status provided does not exist or is mispelled.",{provided:s,available:this.status})),this.cw.runRequest("General/MessageQueue/ByIds",{Ids:e,MaxCount:void 0!==r?r:15,Status:this.status[s]}).then(e=>{})})}delete(e,s,r){return new Promise((i,n)=>{void 0===this.status[s]&&n(new t(2,"Status provided does not exist or is mispelled.",{provided:s,available:this.status})),this.cw.runRequest("General/MessageQueue/Delete",{Ids:e,Status:this.status[s],HoursToKeep:r}).then(e=>{})})}preferences(){return new Promise((e,t)=>{this.cw.runRequest("General/MessageQueue/Preferences",{}).then(e=>{})})}search(e,s){let r;return new Promise((i,n)=>{void 0!==e.status&&void 0===this.status[e.status]?n(new t(3,"Status provided does not exist or is mispelled.",{provided:e.status,available:this.status})):void 0!==e.status&&void 0!==this.status[e.status]&&(r.Status=this.status[e.status]),void 0!==s&&(r.MaxResults=s);let o=["Id","HookId","HookType","Result","DateCreatedBegin","DateCreatedEnd","DateUpdatedBegin","DateUpdatedEnd"],u=["Status","MaxResults"];a.forEach(e,(e,s)=>{-1!=a.indexOf(o,s)&&-1==a.indexOf(u,s)?r[s]=e:-1==a.indexOf(u,s)&&n(new t(4,"Provided parameter does not exist or is mispelled.",{provided:s,value:e,available:a.concat(o,u)}))}),this.cw.runRequest("General/MessageQueue/Search",r).then(e=>{void 0===e.Value&&(e.Value=[]),i(e.Value)})})}update(e){let s;return new Promise((r,i)=>{void 0!==e.status&&void 0===this.status[e.status]?i(new t(3,"Status provided does not exist or is mispelled.",{provided:e.status,available:this.status})):void 0!==e.status&&void 0!==this.status[e.status]&&(s.Status=this.status[e.status]),void 0!==e.hook_types&&void 0===this.hook_types[e.hook_types]?i(new t(3,"Status provided does not exist or is mispelled.",{provided:e.hook_types,available:this.hook_types})):void 0!==e.hook_types&&void 0!==this.hook_types[e.hook_types]&&(s.HookType=this.hook_types[e.hook_types]);let n=["Id","HookId","Packet","Result"],o=["Status","HookType"];a.forEach(e,(e,r)=>{-1!=a.indexOf(n,r)&&-1==a.indexOf(o,r)?s[r]=e:-1==a.indexOf(o,r)&&i(new t(5,"Provided parameter does not exist or is mispelled.",{provided:r,value:e,available:a.concat(n,o)}))}),this.cw.runRequest("General/MessageQueue/Update",s).then(e=>{void 0===e.Value&&(e.Value=[]),r(e.Value)})})}updateMessageStatus(e,s,r){return new Promise((i,n)=>{void 0===this.status[s]&&n(new t(2,"Status provided does not exist or is mispelled.",{provided:s,available:this.status})),this.cw.runRequest("General/MessageQueue/UpdateMessageStatus",{Ids:e,Status:this.status[s],HoursToKeep:r}).then(e=>{})})}getWebooks(e){return new Promise((t,s)=>{this.cw.runRequest("General/MessageQueue/WebHooks",{HookIds:e}).then(e=>{})})}}require("lodash");class c{constructor(e){this.cw=void 0,this.cw=e}}const d=require("lodash");class h{constructor(e){this.cw=void 0,this.cw=e}create(e){return new Promise((s,r)=>{d.has(e,"ProblemSid")?this.cw.runRequest("Ams/ServiceRequest/Create",e).then(e=>{s(e.Value)}).catch(e=>{r(e)}):r(new t(2,"ProblemSid must be provided.",{provided:e}))})}update(e){return new Promise((s,r)=>{d.has(e,"RequestId")?this.cw.runRequest("Ams/ServiceRequest/Update",e).then(e=>{s(e.Value)}).catch(e=>{r(e)}):r(new t(3,"RequestId must be provided.",{provided:e}))})}move(e,s,r,i,n){return new Promise((n,o)=>{d.has(i,"WKID")||d.has(i,"WKT")||o(new t(6,"You must provide either the WKID or WKT for the x/y coordinates.",{projection:i}));var a=d.merge({RequestId:e,X:s,Y:r},i);this.cw.runRequest("Ams/ServiceRequest/Move",a).then(e=>{n(e.Value)}).catch(e=>{o(e)})})}changeProblem(e,t){return new Promise((s,r)=>{this.cw.runRequest("Ams/ServiceRequest/ChangeProblem",{RequestId:e,ProblemSid:t}).then(e=>{s(e.Value)}).catch(e=>{r(e)})})}getById(e){return new Promise((t,s)=>{this.cw.runRequest("Ams/ServiceRequest/ById",{RequestId:e}).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}getByIds(e){return new Promise((t,s)=>{this.cw.runRequest("Ams/ServiceRequest/ByIds",{RequestIds:e}).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}getAuditLog(e){return new Promise((t,s)=>{this.cw.runRequest("Ams/ServiceRequest/AuditLog",{RequestId:e}).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}getCustomFields(e){return new Promise((t,s)=>{this.cw.runRequest("Ams/ServiceRequest/CustomFields",{RequestIds:e}).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}changeCustomFieldCategory(e,t){return new Promise((s,r)=>{this.cw.runRequest("Ams/ServiceRequest/ChangeCustomFieldCategory",{RequestIds:e,CategoryId:t}).then(e=>{s(e.Value)}).catch(e=>{r(e)})})}comment(e,t){return new Promise((s,r)=>{this.cw.runRequest("Ams/ServiceRequest/AddComments",{RequestId:e,Comments:t}).then(e=>{s(e.Value)}).catch(e=>{r(e)})})}cancel(e,t,s){return new Promise((r,i)=>{var n={RequestIds:e};void 0!==t&&d.set(n,"CancelReason",t),void 0!==s&&d.set(n,"DateCancelled",s),this.cw.runRequest("Ams/ServiceRequest/Cancel",n).then(e=>{r(e.Value)}).catch(e=>{i(e)})})}uncancel(e){return new Promise((t,s)=>{this.cw.runRequest("Ams/ServiceRequest/Uncancel",{RequestIds:e}).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}close(e){return new Promise((s,r)=>{this.cw.runRequest("Ams/ServiceRequest/Close",{RequestIds:e}).then(e=>{e.Status>0?r(new t(5,e.Message,{response:e})):s(e.Value)}).catch(e=>{r(e)})})}reopen(e){return new Promise((t,s)=>{this.cw.runRequest("Ams/ServiceRequest/ReOpen",{RequestIds:e}).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}delete(e){return new Promise((s,r)=>{this.cw.runRequest("Ams/ServiceRequest/Delete",{RequestIds:e}).then(e=>{e.Status>0?r(new t(4,e.Message,{response:e})):s(e.Value)}).catch(e=>{r(e)})})}search(e){return new Promise((t,s)=>{this.cw.runRequest("Ams/ServiceRequest/Search",e).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}searchObject(e){return new Promise((t,s)=>{this.cw.runRequest("Ams/ServiceRequest/SearchObject",{RequestId:e}).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}createSearchDefinition(e,t,s,r=!0,i=!0){return new Promise((s,n)=>{var o=e;d.isString(t)&&(d.set(o,"SearchName",t),d.set(o,"SaveDefinition",r),d.set(o,"EnableEurl",i)),this.cw.runRequest("Ams/ServiceRequest/CreateSearchDefinition",o).then(e=>{s(e.Value)}).catch(e=>{n(e)})})}getProblemNodes(e,t=!1,s,r=!1){return new Promise((i,n)=>{var o={DomainId:e,IncludeCancelled:r,ViewOnly:t};null!=s&&d.has(s,"DisplayTextMode")&&(d.set(o,"DisplayTextMode",d.get(s,"DisplayTextMode")),"CD"==d.get(s,"DisplayTextMode")&&d.has(s,"DisplayTextDelimeter")&&d.set(o,"DisplayTextDelimeter",d.get(s,"DisplayTextDelimeter"))),this.cw.runRequest("Ams/ServiceRequest/ProblemNodes",o).then(e=>{i(e.Value)}).catch(e=>{n(e)})})}getProblems(e=!1,t=!0,s){return new Promise((r,i)=>{var n={ForPublicOnly:e,OnlyActiveTemplates:t};void 0!==s&&d.set(n,"DomainIds",s),this.cw.runRequest("Ams/ServiceRequest/Problems",n).then(e=>{r(e.Value)}).catch(e=>{i(e)})})}getProblemsByKeywords(e){return new Promise((t,s)=>{this.cw.runRequest("Ams/ServiceRequest/ProblemsByKeywords",{Keywords:e}).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}getPriorities(e){return new Promise((t,s)=>{this.cw.runRequest("Ams/ServiceRequest/Priorities",{ProblemSids:e}).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}getCustomFieldTemplate(e){return new Promise((t,s)=>{this.cw.runRequest("Ams/ServiceRequest/TemplateCustomFields",{ProblemSids:e}).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}getQASettings(e){return new Promise((t,s)=>{this.cw.runRequest("Ams/ServiceRequest/QA",{ProblemSids:e}).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}getProblemLeaf(e){return new Promise((t,s)=>{this.cw.runRequest("Ams/ServiceRequest/ProblemLeafBySid",{ProblemSid:e}).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}getStatuses(e){return new Promise((t,s)=>{this.cw.runRequest("Ams/ServiceRequest/DefaultStatus",{DomainIds:e}).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}getDispatchTo(e){return new Promise((t,s)=>{this.cw.runRequest("Ams/ServiceRequest/DispatchTo",{DomainId:e}).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}getSubmitTo(e){return new Promise((t,s)=>{this.cw.runRequest("Ams/ServiceRequest/SubmitTo",{DmainId:e}).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}streetCodes(){return new Promise((e,t)=>{this.cw.runRequest("Ams/ServiceRequest/AllStreetCode",{}).then(t=>{e(t.Value)}).catch(e=>{t(e)})})}getTemplatesById(e,t,s){return new Promise((e,r)=>{var i={ProblemSids:null};void 0!==t&&d.set(i,"MinimumDateModified",t),void 0!==s&&d.set(i,"MaximumDateModified",s),this.cw.runRequest("Ams/ServiceRequestTemplate/ByIds",i).then(t=>{e(t.Value)}).catch(e=>{r(e)})})}createTemplateSearchDefinition(e,t,s,r=!0){return new Promise((s,i)=>{var n=e;d.isString(t)&&(d.set(n,"SearchName",t),d.set(n,"SaveDefinition",r)),this.cw.runRequest("Ams/ServiceRequestTemplate/CreateSearchDefinition",n).then(e=>{s(e.Value)}).catch(e=>{i(e)})})}getTemplateQAs(e,t,s){return new Promise((e,t)=>{this.cw.runRequest("Ams/ServiceRequestTemplate/QA",{ProblemSids:null}).then(t=>{e(t.Value)}).catch(e=>{t(e)})})}searchTemplates(e){return new Promise((t,s)=>{this.cw.runRequest("Ams/ServiceRequestTemplate/Search",e).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}getTemplates(e,t=!1,s=!1,r,i){return new Promise((n,o)=>{var a={CanCreate:t,IncludeInactiveIf:s};void 0!==e&&d.set(a,"TemplateIds",e),void 0!==r&&d.set(a,"MinimumDateModified",r),void 0!==i&&d.set(a,"MaximumDateModified",i),this.cw.runRequest("Ams/ServiceRequestTemplate/Templates",a).then(e=>{n(e.Value)}).catch(e=>{o(e)})})}getWOTemplates(e,t=!1){return new Promise((s,r)=>{this.cw.runRequest("Ams/ServiceRequestTemplate/WorkOrderTemplates",{ProblemSids:e,IncludeInactive:t}).then(e=>{s(e.Value)}).catch(e=>{r(e)})})}}const l=require("lodash");class m{constructor(e){this.cw=void 0,this.cw=e}create(e){return new Promise((s,r)=>{l.has(e,"EntityType")&&l.has(e,"InspTemplateId")?this.cw.runRequest("Ams/Inspection/Create",e).then(e=>{s(e.Value)}).catch(e=>{r(e)}):r(new t(1,"EntityType and InspTemplateId properties must be provided.",{provided:e}))})}createFromEntities(e){return new Promise((s,r)=>{l.has(e,"EntityType")&&l.has(e,"InspTemplateId")?this.cw.runRequest("Ams/Inspection/CreateFromEntities",e).then(e=>{s(e.Value)}).catch(e=>{r(e)}):r(new t(1,"EntityType and InspTemplateId properties must be provided.",{provided:e}))})}createFromParent(e){return new Promise((s,r)=>{l.has(e,"EntityType")&&l.has(e,"InspTemplateId")&&l.has(e,"InspectionId")?this.cw.runRequest("Ams/Inspection/CreateFromParent",e).then(e=>{s(e.Value)}).catch(e=>{r(e)}):r(new t(1,"EntityType and InspTemplateId properties must be provided.",{provided:e}))})}createFromServiceRequest(e){return new Promise((s,r)=>{l.has(e,"EntityType")&&l.has(e,"InspTemplateId")&&l.has(e,"RequestId")?this.cw.runRequest("Ams/Inspection/CreateFromServiceRequest",e).then(e=>{s(e.Value)}).catch(e=>{r(e)}):r(new t(1,"EntityType and InspTemplateId properties must be provided.",{provided:e}))})}createFromWorkOrder(e){return new Promise((s,r)=>{l.has(e,"EntityType")&&l.has(e,"InspTemplateId")&&l.has(e,"WorkOrderSid")?this.cw.runRequest("Ams/Inspection/CreateFromWorkOrder",e).then(e=>{s(e.Value)}).catch(e=>{r(e)}):r(new t(1,"EntityType and InspTemplateId properties must be provided.",{provided:e}))})}update(e){return new Promise((s,r)=>new Promise((s,r)=>{l.has(e,"InspectionId")?this.cw.runRequest("Ams/Inspection/Update",e).then(e=>{s(e.Value)}).catch(e=>{r(e)}):r(new t(1,"InspectionId must be provided.",{provided:e}))}))}getById(e){return new Promise((t,s)=>{this.cw.runRequest("Ams/Inspection/ById",{InspectionId:e}).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}getByIds(e){return new Promise((t,s)=>{this.cw.runRequest("Ams/Inspection/ByIds",{InspectionIds:e}).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}cancel(e,t,s){return new Promise((r,i)=>{var n={InspectionIds:e};void 0!==t&&(n.CancelReason=t),void 0!==s&&(n.DateCancelled=s),this.cw.runRequest("Ams/Inspection/Cancel",n).then(e=>{r(e.Value)}).catch(e=>{i(e)})})}uncancel(e){return new Promise((t,s)=>{this.cw.runRequest("Ams/Inspection/Uncancel",{InspectionIds:e}).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}close(e){return new Promise((t,s)=>{this.cw.runRequest("Ams/Inspection/Close",{InspectionIds:e}).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}reopen(e){return new Promise((t,s)=>{this.cw.runRequest("Ams/Inspection/Reopen",{InspectionIds:e}).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}delete(e){return new Promise((t,s)=>{this.cw.runRequest("Ams/Inspection/Delete",{InspectionIds:e}).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}search(e){return new Promise((t,s)=>{this.cw.runRequest("Ams/Inspection/Search",e).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}searchObject(e){return new Promise((t,s)=>{this.cw.runRequest("Ams/ServiceRequest/SearchObject",{InspectionId:e}).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}statuses(){return new Promise((e,t)=>{this.cw.runRequest("Ams/Inspection/Statuses",{}).then(t=>{e(t.Value)}).catch(e=>{t(e)})})}submitTos(e=!1,t){return new Promise((s,r)=>{var i={};e&&(i.IncludeInactiveEmployees=!0),void 0!==t&&(i.DomainIds=t),this.cw.runRequest("Ams/Inspection/SubmitTos",i).then(e=>{s(e.Value)}).catch(e=>{r(e)})})}connectAsset(e,t,s=!0,r={}){return new Promise((s,i)=>{var n={InspectionId:t};l.has(e,"EntityType")&&l.has(e,"EntityUid")?(n.EntityType=e.EntityType,n.EntityUid=e.EntityUid):l.has(e,"Entity")&&(n.Entity=e.Entity),l.has(r,"Facility_Id")&&(n.Facility_Id=r.Facility_Id),l.has(r,"Level_Id")&&(n.Level_Id=r.Level_Id),this.cw.runRequest("Ams/Inspection/AddEntity",n).then(e=>{s(e.Value)}).catch(e=>{i(e)})})}getAnswers(e){return new Promise((t,s)=>{var r={};0==e.length?r.InspectionId=e[0]:r.InspectionIds=e,this.cw.runRequest("Ams/Inspection/Answers",r).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}getAuditLog(e){return new Promise((t,s)=>{this.cw.runRequest("Ams/Inspection/AuditLog",{InspectionId:e}).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}createSearchDefinition(e,t,s,r=!0,i=!0){return new Promise((s,n)=>{var o=e;l.isString(t)&&(l.set(o,"SearchName",t),l.set(o,"SaveDefinition",r),l.set(o,"EnableEurl",i)),this.cw.runRequest("Ams/Inspection/CreateSearchDefinition",o).then(e=>{s(e.Value)}).catch(e=>{n(e)})})}getCycleFrom(){return new Promise((e,t)=>{this.cw.runRequest("Ams/Inspection/CycleFrom",{}).then(t=>{e(t.Value)}).catch(e=>{t(e)})})}getCycleIntervals(){return new Promise((e,t)=>{this.cw.runRequest("Ams/Inspection/CycleIntervals",{}).then(t=>{e(t.Value)}).catch(e=>{t(e)})})}getCycleTypes(){return new Promise((e,t)=>{this.cw.runRequest("Ams/Inspection/CycleTypes",{}).then(t=>{e(t.Value)}).catch(e=>{t(e)})})}getDistricts(){return new Promise((e,t)=>{this.cw.runRequest("Ams/Inspection/Districts",{}).then(t=>{e(t.Value)}).catch(e=>{t(e)})})}move(e,t,s,r,i){return new Promise((n,o)=>{var a={InspectionId:e,x:t,y:s};void 0!==i&&l.set(a,"z",i),void 0!==r&&(l.has(r,"WKID")?l.set(a,"WKID",l.get(r,"WKID")):l.has(r,"WKT")&&l.set(a,"WKT",l.get(r,"WKT")),l.has(r,"VcsWKID")&&l.set(a,"VcsWKID",l.get(r,"VcsWKID"))),this.cw.runRequest("Ams/Inspection/Move",{}).then(e=>{n(e.Value)}).catch(e=>{o(e)})})}getTemplates(e,t,s){return new Promise((r,i)=>{var n={};void 0!==e&&(n.EntityTypes=e),n.CanCreate=void 0===t||t,"object"==typeof s&&l.forIn(s,(e,t)=>{n[t]=e}),this.cw.runRequest("Ams/InspectionTemplate/Templates",n).then(e=>{r(e.Value)}).catch(e=>{i(e)})})}getTemplatesByIds(e,t){return new Promise((s,r)=>{var i={InspTemplateIds:e};"object"==typeof t&&l.forIn(t,(e,t)=>{i[t]=e}),this.cw.runRequest("Ams/InspectionTemplate/ByIds",i).then(e=>{s(e.Value)}).catch(e=>{r(e)})})}getTemplateEntityTypes(e){return new Promise((t,s)=>{this.cw.runRequest("Ams/InspectionTemplate/EntityTypes",{InspTemplateIds:e}).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}getQA(e){return new Promise((t,s)=>{this.cw.runRequest("Ams/InspectionTemplate/QA",{InspTemplateIds:e}).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}getQConditions(e){return new Promise((t,s)=>{this.cw.runRequest("Ams/InspectionTemplate/QuestionConditions",{InspTemplateIds:e}).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}deleteAttachments(e){return new Promise((t,s)=>{this.cw.runRequest("Ams/Attachments/DeleteInspectionAttachments",{AttachmentIds:e}).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}downloadAttachment(e){return new Promise((t,s)=>{this.cw.runRequest("Ams/Attachments/DownloadInspectionAttachment",{AttachmentId:e}).then(e=>{}).catch(e=>{s(e)})})}getAttachmentById(e){return new Promise((t,s)=>{this.cw.runRequest("Ams/Attachments/InspectionAttachmentById",{AttachmentId:e}).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}getAttachments(e){return new Promise((t,s)=>{this.cw.runRequest("Ams/Attachments/InspectionAttachments",{InspectionIds:e}).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}}const w=require("lodash");class p{constructor(e){this.cw=void 0,this.cw=e}create(e,s,r){return new Promise((i,n)=>{if(w.has(e,"WOTemplateId")&&w.has(e,"EntityType")){var o=e;void 0===s||null==s||w.has(o,"InspectionIds")||w.set(o,"InspectionIds",s),void 0===r||null==r||w.has(o,"RequestIds")||w.set(o,"RequestIds",r),this.cw.runRequest("Ams/WorkOrder/Create",o).then(e=>{i(e.Value)}).catch(e=>{n(e)})}else n(new t(2,"WOTemplateId & EntityType must be provided.",{provided:e}))})}createFromParent(e,s,r=!0){return new Promise((r,i)=>{if(w.has(e,"WOTemplateId")&&w.has(e,"EntityType")){var n=e;w.isString(s)?w.set(n,"WorkOrderId",s):w.set(n,"WorkOrderSid",s),this.cw.runRequest("Ams/WorkOrder/Create",n).then(e=>{r(e.Value)}).catch(e=>{i(e)})}else i(new t(2,"WOTemplateId & EntityType must be provided.",{provided:e}))})}update(e){return new Promise((s,r)=>{w.has(e,"WorkOrderSid")||w.has(e,"WorkOrderId")?this.cw.runRequest("Ams/WorkOrder/Update",e).then(e=>{s(e.Value)}).catch(e=>{r(e)}):r(new t(3,"WorkOrderId or WorkOrderSid must be provided.",{provided:e}))})}combine(e,s,r=!0){return new Promise((i,n)=>{this.cw.runRequest("Ams/WorkOrder/Combine",{CancelCombinedWorkOrders:r,ToWorkOrderId:s,FromWorkOrderIds:e}).then(e=>{e.Status>0?n(new t(4,e.Message,{response:e})):i(e.Value)}).catch(e=>{n(e)})})}move(e,s,r,i,n){return new Promise((n,o)=>{w.has(i,"WKID")||w.has(i,"WKT")||o(new t(6,"You must provide either the WKID or WKT for the x/y coordinates.",{projection:i}));var a=w.merge({WorkOrderId:e,X:s,Y:r},i);this.cw.runRequest("Ams/WorkOrder/Move",a).then(e=>{n(e.Value)}).catch(e=>{o(e)})})}getById(e,t=!0){return new Promise((t,s)=>{var r={};if(w.isString(e)){w.set(r,"WorkOrderId",e);var i="Ams/WorkOrder/ById"}else w.set(r,"WorkOrderSid",e),i="Ams/WorkOrder/BySid";this.cw.runRequest(i,r).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}getByIds(e){return new Promise((s,r)=>{var i={};if(0==e.length)r(new t(10,"No workorder S/IDs were provided.",{workorderSId:e}));else{var n="Ams/WorkOrder/ByIds";w.isString(e[0])?(w.set(i,"WorkOrderIds",e),n="Ams/WorkOrder/ByIds"):w.isNumber(e[0])?(w.set(i,"WorkOrderSids",e),n="Ams/WorkOrder/BySids"):r(new t(9,"No workorder S/IDs were provided.",{workorderSId:e})),this.cw.runRequest(n,i).then(e=>{s(e.Value)}).catch(e=>{r(e)})}})}getInstructions(e){return new Promise((s,r)=>{var i={};if(0==e.length)r(new t(10,"No workorder S/IDs were provided.",{workorderSId:e}));else{var n="Ams/WorkOrder/ByIds";w.isString(e[0])?(w.set(i,"WorkOrderIds",e),n="Ams/WorkOrder/InstructionsByWorkOrderIds"):w.isNumber(e[0])?(w.set(i,"WorkOrderSids",e),n="Ams/WorkOrder/InstructionsByWorkOrderSids"):r(new t(9,"No workorder S/IDs were provided.",{workorderSId:e})),this.cw.runRequest(n,i).then(e=>{s(e.Value)}).catch(e=>{r(e)})}})}getAuditLog(e){return new Promise((s,r)=>{var i={};w.isString(e)?w.set(i,"WorkOrderId",e):w.isNumber(e)?w.set(i,"WorkOrderSid",e):r(new t(9,"Workorder S/IDs was not provided.",{workorderSId:e})),this.cw.runRequest("Ams/WorkOrder/AuditLog",i).then(e=>{s(e.Value)}).catch(e=>{r(e)})})}getCustomFieldValues(e){return new Promise((s,r)=>{var i={},n="Ams/WorkOrder/CustomFields";w.isString(e[0])?(w.set(i,"WorkOrderIds",e),n="Ams/WorkOrder/CustomFields"):w.isNumber(e[0])?(w.set(i,"WorkOrderSids",e),n="Ams/WorkOrder/CustomFieldsByWorkOrderSids"):r(new t(9,"No workorder S/IDs were provided.",{workorderSIds:e})),this.cw.runRequest(n,i).then(e=>{s(e.Value)}).catch(e=>{r(e)})})}comment(e,s){return new Promise((r,i)=>{var n={Comments:s};w.isString(e)?w.set(n,"WorkOrderId",e):w.isNumber(e)?w.set(n,"WorkOrderSid",e):i(new t(9,"Workorder S/IDs was not provided.",{workorderSId:e})),this.cw.runRequest("Ams/WorkOrder/AddComments",n).then(e=>{r(e.Value)}).catch(e=>{i(e)})})}getEntities(e,s=!0){return new Promise((r,i)=>{var n={GetGisData:s};0==e.length?i(new t(11,"No workorder S/IDs were provided.",{workorderSId:e})):w.isString(e[0])?w.set(n,"WorkOrderIds",e):w.isNumber(e[0])?w.set(n,"WorkOrderSids",e):i(new t(12,"No workorder S/IDs were provided.",{workorderSId:e})),this.cw.runRequest("Ams/WorkOrder/Entities",n).then(e=>{e.Status>0?i(new t(4,e.Message,{response:e})):r(e.Value)}).catch(e=>{i(e)})})}addEntities(e,s,r=!0){return new Promise((i,n)=>{var o={UpdateXY:r};w.isString(e)?w.set(o,"WorkOrderId",e):w.set(o,"WorkOrderSid",e),w.has(s,"Facility_Id")&&w.set(o,"Facility_Id",w.get(s,"Facility_Id")),w.has(s,"Level_Id")&&w.set(o,"Level_Id",w.get(s,"Level_Id")),w.has(s,"EntityUids")&&w.has(s,"EntityType")?(w.set(o,"EntityUids",w.get(s,"EntityUids")),w.set(o,"EntityType",w.get(s,"EntityType"))):n(new t(7,"No entity info was provided.",{workorderSId:e,entityInfo:s})),this.cw.runRequest("Ams/WorkOrder/AddEntities",o).then(e=>{e.Status>0?n(new t(4,e.Message,{response:e})):i(e.Value)}).catch(e=>{n(e)})})}removeEntities(e,s,r=!0){return new Promise((i,n)=>{var o={UpdateXY:r};w.isString(e)?w.set(o,"WorkOrderId",e):w.set(o,"WorkOrderSid",e),w.has(s,"ObjectIds")?w.set(o,"ObjectIds",w.get(s,"ObjectIds")):w.has(s,"EntityUids")&&w.has(s,"EntityType")?(w.set(o,"EntityUids",w.get(s,"EntityUids")),w.set(o,"EntityType",w.get(s,"EntityType"))):n(new t(8,"No entity info was provided.",{workorderSId:e,entityInfo:s})),this.cw.runRequest("Ams/WorkOrder/RemoveEntities",o).then(e=>{e.Status>0?n(new t(4,e.Message,{response:e})):i(e.Value)}).catch(e=>{n(e)})})}cancel(e,t,s){return new Promise((r,i)=>{var n={WorkOrderIds:e};void 0!==t&&w.set(n,"CancelReason",t),void 0!==s&&w.set(n,"DateCancelled",s),this.cw.runRequest("Ams/WorkOrder/Cancel",n).then(e=>{r(e.Value)}).catch(e=>{i(e)})})}uncancel(e){return new Promise((t,s)=>{this.cw.runRequest("Ams/WorkOrder/Uncancel",{WorkOrderIds:e}).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}close(e){return new Promise((s,r)=>{this.cw.runRequest("Ams/WorkOrder/Close",{WorkOrderIds:e}).then(e=>{e.Status>0?r(new t(5,e.Message,{response:e})):s(e.Value)}).catch(e=>{r(e)})})}reopen(e){return new Promise((t,s)=>{this.cw.runRequest("Ams/WorkOrder/ReOpen",{WorkOrderIds:e}).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}delete(e){return new Promise((s,r)=>{this.cw.runRequest("Ams/WorkOrder/Delete",{WorkOrderIds:e}).then(e=>{e.Status>0?r(new t(4,e.Message,{response:e})):s(e.Value)}).catch(e=>{r(e)})})}getCategories(){return new Promise((e,t)=>{this.cw.runRequest("Ams/WorkOrder/Categories",{}).then(t=>{e(t.Value)}).catch(e=>{t(e)})})}getPriorities(){return new Promise((e,t)=>{this.cw.runRequest("Ams/WorkOrder/Priorities",{}).then(t=>{e(t.Value)}).catch(e=>{t(e)})})}getCycleFrom(){return new Promise((e,t)=>{this.cw.runRequest("Ams/WorkOrder/CycleFrom",{}).then(t=>{e(t.Value)}).catch(e=>{t(e)})})}getCycleIntervals(){return new Promise((e,t)=>{this.cw.runRequest("Ams/WorkOrder/CycleIntervals",{}).then(t=>{e(t.Value)}).catch(e=>{t(e)})})}getCycleTypes(){return new Promise((e,t)=>{this.cw.runRequest("Ams/WorkOrder/CycleTypes",{}).then(t=>{e(t.Value)}).catch(e=>{t(e)})})}getStages(){return new Promise((e,t)=>{this.cw.runRequest("Ams/WorkOrder/Stages",{}).then(t=>{e(t.Value)}).catch(e=>{t(e)})})}getExpenseTypes(){return new Promise((e,t)=>{this.cw.runRequest("Ams/WorkOrder/ExpenseTypes",{}).then(t=>{e(t.Value)}).catch(e=>{t(e)})})}}require("lodash");class v{constructor(e){this.cw=void 0,this.cw=e}}const y=require("lodash");class I{constructor(e){this.cw=void 0,this.cw=e}addFee(e,t,s){return new Promise((r,i)=>{var n=y.merge({CaObjectId:e,FeeSetupId:t},s);this.cw.runRequest("Pll/CaseFees/Add",n).then(e=>{r(e.Value)}).catch(e=>{i(e)})})}updateFee(e,t){return new Promise((s,r)=>{var i=y.merge({CaFeeId:e},t);this.cw.runRequest("Pll/CaseFees/Update",i).then(e=>{s(e.Value)}).catch(e=>{r(e)})})}addDefaultFees(e,t){return new Promise((s,r)=>{this.cw.runRequest("Pll/CaseFees/AddDefault",{CaObjectId:e,BusCaseId:t}).then(e=>{s(e.Value)}).catch(e=>{r(e)})})}getFees(e){return new Promise((t,s)=>{this.cw.runRequest("Pll/CaseFees/ByCaObjectId",{CaObjectId:e}).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}deleteFee(e){return new Promise((t,s)=>{this.cw.runRequest("Pll/CaseFees/Delete",{CaFeeId:e}).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}deleteFeesByCaseId(e){return new Promise((t,s)=>{this.cw.runRequest("Pll/CaseFees/DeleteByCaObjectId",{CaObjectId:e}).then(e=>{t(e.Value)}).catch(e=>{s(e)})})}searchFees(e,s,r,i){return new Promise((n,o)=>{void 0===e&&void 0===s&&void 0===r&&void 0===i&&o(new t(1,"At least one of the arguments (caFeeId, caObjectId, feeCode, feeDesc) must be defined."));var a={};void 0!==e&&y.set(a,"CaFeeId",e),void 0!==s&&y.set(a,"CaObjectId",s),void 0!==r&&y.set(a,"FeeCode",r),void 0!==i&&y.set(a,"FeeDesc",i),this.cw.runRequest("Pll/CaseFees/Search",a).then(e=>{n(e.Value)}).catch(e=>{o(e)})})}getAllFeeTemplates(){return new Promise((e,t)=>{this.cw.runRequest("Pll/FeeSetup/All",{}).then(t=>{e(t.Value)}).catch(e=>{t(e)})})}searchFeeTemplates(e,s,r,i,n){return new Promise((o,a)=>{void 0===e&&void 0===s&&void 0===r&&void 0===i&&void 0===n&&a(new t(1,"At least one of the arguments (caFeeId, caObjectId, feeCode, feeDesc) must be defined."));var u={};void 0!==e&&null!=e&&y.set(u,"FeeSetupId",e),void 0!==s&&null!=s&&y.set(u,"FeeTypeId",s),void 0!==r&&null!=r&&y.set(u,"FeeCode",r),void 0!==i&&null!=i&&y.set(u,"FeeDesc",i),void 0!==n&&null!=n&&y.set(u,"AccountCode",n),this.cw.runRequest("Pll/FeeSetup/Search",u).then(e=>{o(e.Value)}).catch(e=>{a(e)})})}}require("lodash");class q{constructor(e){this.cw=void 0,this.cw=e}}require("lodash");class k{constructor(e){this.cw=void 0,this.data=void 0,this.workflow=void 0,this.financial=void 0,this.cw=e,this.data=new v(e),this.workflow=new q(e),this.financial=new I(e)}}const R=require("https"),S=require("querystring"),g=require("lodash");module.exports=class{constructor(e,t,s){this.base_url=void 0,this.Token=void 0,this.login=void 0,this.password=void 0,this.gisToken=void 0,this.gisTokenUrl=void 0,this.settings=void 0,this.error=void 0,this.general=void 0,this.activity_link=void 0,this.message_queue=void 0,this.gis=void 0,this.search=void 0,this.request=void 0,this.inspection=void 0,this.workorder=void 0,this.case=void 0,this.extensions=void 0,this.features=void 0,this.potential_loads=void 0,this.base_url="cityworksonline",this.extensions={UnknownExtension:0,CwAnalytics:1,WebHooks:2,PLLPublicApp:3,ActivityUpdate:4,SingleSignOn:5},this.features={UnknownFeature:0,ViewInspections:1,EditInspections:2,ViewServiceRequest:3,EditServiceRequest:4,ViewWorkOrder:5,EditWorkOrder:6,EquipmentCheckOut:7,OfficeField:8,Respond:9,Eurl:10,PaverInterface:11,Contracts:12,Storeroom:13,PLL:14,Cw4XL:15,TableEditor:16,CCTVInterface:17,MobileAndroid:18,MobileiOS:19,PerformanceBudgeting:20,Insights:21,RespondCase:22,RespondInspection:23,RespondServiceRequest:24,RespondTaskManager:25,RespondWorkOrder:26,Workload:27,OpX:28,TrimbleUnityMobile:29,TrimbleVegetationManager:30},this.settings={path:"cityworks",secure:!0,expires:null,default_domain:null},this.potential_loads=["general","activity_link","message_queue","gis","search","request","case","case_financial"],void 0!==e&&this.configure(e,t,s)}configure(e,t,s){if(this.base_url=void 0!==e?e:"cityworksonline",this.settings={path:"cityworks",secure:!0,expires:null,default_domain:null},void 0!==t&&g.forEach(t,(e,t)=>{void 0!==this.settings[t]&&(this.settings[t]=e)}),void 0===s)this.general=new r(this),this.activity_link=new n(this),this.message_queue=new u(this),this.request=new h(this),this.inspection=new m(this),this.workorder=new p(this),this.case=new k(this);else{let e=this;g.forEach(this.potential_loads,function(t){switch(t){case"general":e.general=new r(e);break;case"activity_link":e.activity_link=new n(e);break;case"message_queue":e.message_queue=new u(e);break;case"gis":e.gis=new o(e);break;case"search":e.search=new c(e);break;case"request":e.request=new h(e);break;case"case":e.case=new k(e);break;case"inspection":e.inspection=new m(e);break;case"workorder":e.workorder=new p(e)}})}}runRequest(e,s){return new Promise((r,i)=>{let n={};n.data=JSON.stringify(s),void 0!==this.Token&&""!=this.Token&&"General/Authentication/CityworksOnlineAuthenticate"!=e&&"General/Authentication/Authenticate"!=e&&(n.token=this.Token);let o={hostname:this.base_url,port:443,path:"/"+this.settings.path+"/services/"+e,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Length":Buffer.byteLength(S.stringify(n))},timeout:1e7},a=R.request(o,e=>{let s="";e.on("error",function(e){console.log(e,"Caught on error"),i(new t(13,"Unknown error.",e))}),e.on("data",function(e){s+=e}),e.on("end",function(){try{if(null==(JSON.stringify(s)+"[test string]").match(/\<h2\>Object\ moved\ to/)){var e=JSON.parse(s);void 0===e?i(new t(10,"No response received from Cityworks API.")):void 0!==e&&void 0!==e.Value?r(e):i(new t(3,"Unknown error.",{options:o,postedData:n,api_returned_string:e}))}else i(new t(1,"Error parsing JSON. Cityworks returned HTML.",{response:s}))}catch(e){e instanceof SyntaxError?(console.log("try/catch error on JSON"),i(new t(1,"Error parsing JSON.",{error:e}))):(console.log("try/catch error on JSON"),i(new t(1,"Error parsing JSON.")))}})});a.write(S.stringify(n)),a.end()})}authenticate(e,s){return new Promise((r,i)=>{let n="General/Authentication/Authenticate";"cityworksonline"==this.base_url&&(n="General/Authentication/CityworksOnlineAuthenticate"),this.runRequest(n,{LoginName:e,Password:s}).then(n=>{n.Status>0?i(new t(10,n.Message)):void 0!==n.Value&&void 0!==n.Value.Token?(this.login=e,this.password=s,this.Token=n.Value.Token,r(!0)):i(new t(11,"Unknown Error"))}).catch(e=>{i(e)})})}authenticateWithGISToken(e,t,s,r){return this.login=e,this.gisToken=t,this.gisTokenUrl=s,void 0!==r&&(r=12096e5),new Promise((e,t)=>{this.runRequest("General/Authentication/AuthenticateGisToken",{LoginName:this.login,GisToken:this.gisToken,GisTokenUrl:this.gisTokenUrl,Expires:r}).then(t=>{void 0!==t.Status&&t.Status>0||(void 0!==t.Value&&void 0!==t.Value.Token?(this.Token=t.Value.Token,e(!0)):e(!1))}).catch(e=>{throw e})})}validateToken(e,t){return new Promise((s,r)=>{this.runRequest("General/Authentication/Validate",{Token:e}).then(r=>{r.Status>0?s(!1):(t&&(this.Token=e),s(r.Value))}).catch(e=>{throw e})})}setToken(e){return""!=e&&null!=e&&(this.Token=e,!0)}getToken(){return""!=this.Token&&null!=this.Token&&this.Token}revokeToken(e){return new Promise((t,s)=>{this.runRequest("General/Token/RevokeUser",{RevokeDate:e}).then(e=>{t(!(void 0!==e.Status&&e.Status>0))}).catch(e=>{throw e})})}getLocalizationSettings(){return new Promise((e,t)=>{this.runRequest("General/Localization/LocalizationSettings",{}).then(t=>{e(t.Value)})})}getTimezoneOptions(){return new Promise((e,t)=>{this.runRequest("General/Localization/TimeZones",{}).then(t=>{e(t.Value)})})}getCurrentLocation(){return new Promise((e,t)=>{this.runRequest("General/AppData/CurrentLocation",{}).then(t=>{e(t.Value)})})}licensedApiCheck(e,t){return new Promise((s,r)=>{this.runRequest("General/AppData/SelectedEntities",{Area:e,Service:t}).then(e=>{s(e.Value)})})}licensedExtensionCheck(e){return new Promise((s,r)=>{void 0===this.extensions[e]&&r(new t(4,"Extension provided does not exist or is mispelled.",{provided:e,available:this.extensions})),this.runRequest("General/Authorization/LicensedExtensionCheck",{Extension:this.extensions[e]}).then(e=>{s(e.Value)})})}licensedExtensionsCheck(e){return new Promise((s,r)=>{var i={Extensions:[]};g.forEach(e,e=>{void 0===this.extensions[e]?r(new t(5,"Extension provided does not exist or is mispelled.",{provided:e,available:this.extensions})):i.Extensions.push(this.extensions[e])}),this.runRequest("General/Authorization/LicensedExtensionsCheck",i).then(e=>{let i={},n=g.invert(this.extensions);g.forEach(e,(e,s)=>{void 0===n[e]?r(new t(6,"Extension index provided does not exist or isn't configured properly.",{provided_num_returned:e,available:this.extensions})):i[n[e]]=s}),s(i)})})}licensedFeatureCheck(e){return new Promise((s,r)=>{void 0===this.features[e]&&r(new t(7,"Feature provided does not exist or is mispelled.",{provided:e,available:this.features})),this.runRequest("General/Authorization/LicensedFeatureCheck",{Feature:this.features[e]}).then(e=>{s(e.Value)})})}licensedFeaturesCheck(e){return new Promise((s,r)=>{var i={Features:[]};g.forEach(e,e=>{void 0===this.features[e]?r(new t(8,"Feature provided does not exist or is mispelled.",{provided:e,available:this.features})):i.Features.push(this.features[e])}),this.runRequest("General/Authorization/LicensedFeaturesCheck",i).then(e=>{let i={},n=g.invert(this.features);g.forEach(e.Value,(e,s)=>{void 0===n[e]?r(new t(9,"Feature index provided does not exist or isn't configured properly.",{provided:e,available:n})):i[n[e]]=s}),s(i)})})}licensedServicesCheck(e){return new Promise((t,s)=>{this.runRequest("General/Authorization/LicensedServicesCheck",{Services:e}).then(e=>{t(e.Value)})})}cityworksOnlineSites(e,t){return new Promise((s,r)=>{this.runRequest("General/Authentication/CityworksOnlineSites",{LoginName:void 0!==e?e:this.login,Password:void 0!==t?t:this.password}).then(e=>{s(e.Value)})})}domains(){return new Promise((e,t)=>{this.runRequest("General/Authentication/Domains",{}).then(t=>{e(t.Value)})})}user(e){return new Promise((t,s)=>{this.runRequest("General/Authentication/User",{LoginName:void 0!==e?e:this.login}).then(e=>{t(e.Value)})})}version(){return new Promise((e,t)=>{this.runRequest("General/Authentication/Version",{}).then(t=>{e(t.Value)})})}};
//# sourceMappingURL=index.modern.js.map
