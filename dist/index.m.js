import e from"reversible-map";var t=function(e,t,n){this.name=void 0,this.code=void 0,this.message=void 0,this.info=void 0,this.name="Cityworks Exception",this.code=e,this.message=t,void 0!==n&&(this.info=JSON.stringify(n))},n=require("lodash"),i=function(){function e(e){this.cw=void 0,this.cw=e}var i=e.prototype;return i.notifications=function(){var e=this;return new Promise(function(t,n){e.cw.runRequest("General/ActivityNotification/User",{}).then(function(e){t(e.Value)})})},i.amIWatching=function(e,n){var i=this;return new Promise(function(s,r){var o={null:0,case:1,task:2};void 0===o[e]?r(new t(1,"Activity type provided does not exist.",{provided:e,potential_activities:o})):i.cw.runRequest("General/ActivityNotification/UserWatching",{ActivityType:o[e],ActivityId:n}).then(function(e){s(e.Value)}).catch(function(e){r(new t(2,"Unknown error."))})})},i.quickSearch=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("General/QuickSearch/QuickSearch",{QuickSearchText:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},i.getActivityMetadataByIds=function(e,i){var s=this;return new Promise(function(r,o){var u=["INSPECTION","REQUEST","WORKORDER"];-1==n.indexOf(u,i)&&o(new t(2,"TableName provided does not exist or is mispelled.",{provided:i,available:u})),s.cw.runRequest("General/CwMetaData/ByTableNameSids",{Ids:e,TableName:i}).then(function(e){console.log(e),r(e.Value)}).catch(function(e){o(e)})})},i.getWOEntityCostSummary=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("General/CostSummary/WorkOrderEntity",{ObjectIds:e}).then(function(e){console.log(e),n(e.Value)}).catch(function(e){i(e)})})},i.searchWOEntityCostSummary=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("General/CostSummary/WorkOrderEntitySearch",{SearchId:e}).then(function(e){console.log(e),n(e.Value)}).catch(function(e){i(e)})})},e}(),s=require("lodash"),r=function(){function n(t){this.activityTypes=void 0,this.linkTypes=void 0,this.cw=void 0,this.cw=t,this.activityTypes=new e,this.activityTypes.set("null",0),this.activityTypes.set("case",1),this.activityTypes.set("inspection",2),this.activityTypes.set("request",3),this.activityTypes.set("workorder",4),this.activityTypes.set("wipcase",5),this.linkTypes=new e,this.linkTypes.set("null",0),this.linkTypes.set("parent",1),this.linkTypes.set("related",2)}var i=n.prototype;return i.add=function(e,n,i,s,r){var o=this;return void 0===r&&(r="related"),new Promise(function(u,c){o.activityTypes.has(e)||c(new t(1,"Source type not found.",{provided:e,options:o.activityTypes})),o.activityTypes.has(i)||c(new t(2,"Destination type not found.",{provided:i,options:o.activityTypes})),o.linkTypes.has(r)||c(new t(3,"Link type not found.",{provided:r,options:o.linkTypes}));var a={SourceType:o.activityTypes.get(e),SourceSid:n,DestType:o.activityTypes.get(i),DestSid:s,LinkType:o.linkTypes.get(r)};o.cw.runRequest("General/ActivityLink/Add",a).then(function(e){u(e.Value)})})},i.get=function(e,n){var i=this;return new Promise(function(r,o){i.activityTypes.has(e)||o(new t(4,"Activity type not found.",{provided:e,options:i.activityTypes}));var u={ActivityType:i.activityTypes.get(e),ActivitySids:n},c=i;i.cw.runRequest("General/ActivityLink/ByActivitySids",u).then(function(e){var t=new Array;s.forEach(e.Value,function(e,n){e.DestType=c.activityTypes.get(e.DestType),e.SourceType=c.activityTypes.get(e.SourceType),e.LinkType=c.linkTypes.get(e.LinkType),t.push(e)}),r(t)})})},i.clone=function(e,n,i,s){var r=this;return new Promise(function(o,u){r.activityTypes.has(e)||u(new t(1,"Source type not found.",{provided:e,options:r.activityTypes})),r.activityTypes.has(i)||u(new t(1,"Destination type not found.",{provided:i,options:r.activityTypes}));var c={SourceActivityType:r.activityTypes.get(e),SourceActivitySid:n,DestinationActivityType:r.activityTypes.get(i),DestinationActivitySid:s};r.cw.runRequest("General/ActivityLink/CloneByActivitySid",c).then(function(e){o(e.Value)})})},i.delete=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("General/ActivityLink/Delete",{ActivityLinkId:e}).then(function(e){n(e.Value)})})},i.remove=function(e,n,i,s,r){var o=this;return void 0===r&&(r="related"),new Promise(function(u,c){o.activityTypes.has(e)||c(new t(1,"Source type not found.",{provided:e,options:o.activityTypes})),o.activityTypes.has(i)||c(new t(1,"Destination type not found.",{provided:i,options:o.activityTypes})),o.linkTypes.has(r)||c(new t(1,"Link type not found.",{provided:r,options:o.linkTypes}));var a={SourceType:o.activityTypes.get(e),SourceSid:n,DestType:o.activityTypes.get(i),DestSid:s,LinkType:o.linkTypes.get(r)};o.cw.runRequest("General/ActivityLink/Remove",a).then(function(e){u(e.Value)})})},n}();require("lodash");var o=function(){function e(e){this.cw=void 0,this.cw=e}var t=e.prototype;return t.getConfig=function(e,t,n,i){var s=this;return new Promise(function(t,n){e=e.toLowerCase(),s.cw.runRequest("Gis/MapService/Domain",{}).then(function(e){t(e.Value)})})},t.domain=function(e,t){var n=this;return new Promise(function(e,t){n.cw.runRequest("Gis/MapService/Domain",{}).then(function(t){e(t.Value)})})},t.downloadMobile=function(e,t){var n=this;return new Promise(function(e,t){n.cw.runRequest("Gis/MapService/DownloadMobileMapCache",{}).then(function(t){e(t.Value)})})},t.initialExtent=function(){var e=this;return new Promise(function(t,n){e.cw.runRequest("Gis/MapService/InitialExtent",{}).then(function(e){t(e.Value)})})},t.request=function(e,t){var n=this;return new Promise(function(e,t){n.cw.runRequest("Gis/MapService/ServiceRequestConfiguration",{}).then(function(t){e(t.Value)})})},t.inspection=function(e,t){var n=this;return new Promise(function(e,t){n.cw.runRequest("Gis/MapService/InspectionConfiguration",{}).then(function(t){e(t.Value)})})},t.workOrder=function(e,t){var n=this;return new Promise(function(e,t){n.cw.runRequest("Gis/MapService/WorkOrderConfiguration",{}).then(function(t){e(t.Value)})})},t.user=function(e,t,n,i){var s=this;return new Promise(function(e,t){s.cw.runRequest("Gis/MapService/User",{}).then(function(t){e(t.Value)})})},t.selectedEntities=function(){var e=this;return new Promise(function(t,n){e.cw.runRequest("General/AppData/SelectedEntities",{}).then(function(e){t(e.Value)})})},e}(),u=require("lodash"),c=function(){function e(e){this.cw=void 0,this.status=void 0,this.hook_types=void 0,this.cw=e,this.status={Pending:0,Processing:1,Complete:2,Failed:3},this.hook_types={Unknown:0,ActivityUpdate:1,Email:2,WebHook:3}}var n=e.prototype;return n.processMessages=function(e,t){var n=this;return void 0===t&&(t=!1),new Promise(function(i,s){n.cw.runRequest("General/WebHookEvent/ProcessMessages",{Ids:e,Delete:t}).then(function(e){})})},n.get=function(e,n,i){var s=this;return void 0===i&&(i=15),new Promise(function(r,o){void 0===s.status[n]&&o(new t(1,"Status provided does not exist or is mispelled.",{provided:n,available:s.status})),s.cw.runRequest("General/MessageQueue/ByIds",{Ids:e,MaxCount:void 0!==i?i:15,Status:s.status[n]}).then(function(e){})})},n.delete=function(e,n,i){var s=this;return new Promise(function(r,o){void 0===s.status[n]&&o(new t(2,"Status provided does not exist or is mispelled.",{provided:n,available:s.status})),s.cw.runRequest("General/MessageQueue/Delete",{Ids:e,Status:s.status[n],HoursToKeep:i}).then(function(e){})})},n.preferences=function(){var e=this;return new Promise(function(t,n){e.cw.runRequest("General/MessageQueue/Preferences",{}).then(function(e){})})},n.search=function(e,n){var i,s=this;return new Promise(function(r,o){void 0!==e.status&&void 0===s.status[e.status]?o(new t(3,"Status provided does not exist or is mispelled.",{provided:e.status,available:s.status})):void 0!==e.status&&void 0!==s.status[e.status]&&(i.Status=s.status[e.status]),void 0!==n&&(i.MaxResults=n);var c=["Id","HookId","HookType","Result","DateCreatedBegin","DateCreatedEnd","DateUpdatedBegin","DateUpdatedEnd"],a=["Status","MaxResults"];u.forEach(e,function(e,n){-1!=u.indexOf(c,n)&&-1==u.indexOf(a,n)?i[n]=e:-1==u.indexOf(a,n)&&o(new t(4,"Provided parameter does not exist or is mispelled.",{provided:n,value:e,available:u.concat(c,a)}))}),s.cw.runRequest("General/MessageQueue/Search",i).then(function(e){void 0===e.Value&&(e.Value=[]),r(e.Value)})})},n.update=function(e){var n,i=this;return new Promise(function(s,r){void 0!==e.status&&void 0===i.status[e.status]?r(new t(3,"Status provided does not exist or is mispelled.",{provided:e.status,available:i.status})):void 0!==e.status&&void 0!==i.status[e.status]&&(n.Status=i.status[e.status]),void 0!==e.hook_types&&void 0===i.hook_types[e.hook_types]?r(new t(3,"Status provided does not exist or is mispelled.",{provided:e.hook_types,available:i.hook_types})):void 0!==e.hook_types&&void 0!==i.hook_types[e.hook_types]&&(n.HookType=i.hook_types[e.hook_types]);var o=["Id","HookId","Packet","Result"],c=["Status","HookType"];u.forEach(e,function(e,i){-1!=u.indexOf(o,i)&&-1==u.indexOf(c,i)?n[i]=e:-1==u.indexOf(c,i)&&r(new t(5,"Provided parameter does not exist or is mispelled.",{provided:i,value:e,available:u.concat(o,c)}))}),i.cw.runRequest("General/MessageQueue/Update",n).then(function(e){void 0===e.Value&&(e.Value=[]),s(e.Value)})})},n.updateMessageStatus=function(e,n,i){var s=this;return new Promise(function(r,o){void 0===s.status[n]&&o(new t(2,"Status provided does not exist or is mispelled.",{provided:n,available:s.status})),s.cw.runRequest("General/MessageQueue/UpdateMessageStatus",{Ids:e,Status:s.status[n],HoursToKeep:i}).then(function(e){})})},n.getWebooks=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("General/MessageQueue/WebHooks",{HookIds:e}).then(function(e){})})},e}();require("lodash");var a=function(e){this.cw=void 0,this.cw=e};require("lodash");var d=function(e){this.cw=void 0,this.cw=e},h=require("lodash"),f=function(){function e(e){this.cw=void 0,this.admin=void 0,this.cw=e,this.admin=new d(e)}var n=e.prototype;return n.create=function(e){var n=this;return new Promise(function(i,s){h.has(e,"ProblemSid")?n.cw.runRequest("Ams/ServiceRequest/Create",e).then(function(e){i(e.Value)}).catch(function(e){s(e)}):s(new t(2,"ProblemSid must be provided.",{provided:e}))})},n.update=function(e){var n=this;return new Promise(function(i,s){h.has(e,"RequestId")?n.cw.runRequest("Ams/ServiceRequest/Update",e).then(function(e){i(e.Value)}).catch(function(e){s(e)}):s(new t(3,"RequestId must be provided.",{provided:e}))})},n.move=function(e,n,i,s,r){var o=this;return new Promise(function(u,c){h.has(s,"WKID")||h.has(s,"WKT")||c(new t(6,"You must provide either the WKID or WKT for the x/y coordinates.",{projection:s}));var a={RequestId:e,X:n,Y:i};void 0!==r&&h.set(a,"Z",r);var d=h.merge(a,s);o.cw.runRequest("Ams/ServiceRequest/Move",d).then(function(e){u(e.Value)}).catch(function(e){c(e)})})},n.changeProblem=function(e,t){var n=this;return new Promise(function(i,s){n.cw.runRequest("Ams/ServiceRequest/ChangeProblem",{RequestId:e,ProblemSid:t}).then(function(e){i(e.Value)}).catch(function(e){s(e)})})},n.getById=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Ams/ServiceRequest/ById",{RequestId:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.getByIds=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Ams/ServiceRequest/ByIds",{RequestIds:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.getAuditLog=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Ams/ServiceRequest/AuditLog",{RequestId:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.getCustomFields=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Ams/ServiceRequest/CustomFields",{RequestIds:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.changeCustomFieldCategory=function(e,t){var n=this;return new Promise(function(i,s){n.cw.runRequest("Ams/ServiceRequest/ChangeCustomFieldCategory",{RequestIds:e,CategoryId:t}).then(function(e){i(e.Value)}).catch(function(e){s(e)})})},n.comment=function(e,t){var n=this;return new Promise(function(i,s){n.cw.runRequest("Ams/ServiceRequest/AddComments",{RequestId:e,Comments:t}).then(function(e){i(e.Value)}).catch(function(e){s(e)})})},n.cancel=function(e,t,n){var i=this;return new Promise(function(s,r){var o={RequestIds:e};void 0!==t&&h.set(o,"CancelReason",t),void 0!==n&&h.set(o,"DateCancelled",n),i.cw.runRequest("Ams/ServiceRequest/Cancel",o).then(function(e){s(e.Value)}).catch(function(e){r(e)})})},n.uncancel=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Ams/ServiceRequest/Uncancel",{RequestIds:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.close=function(e){var n=this;return new Promise(function(i,s){n.cw.runRequest("Ams/ServiceRequest/Close",{RequestIds:e}).then(function(e){e.Status>0?s(new t(5,e.Message,{response:e})):i(e.Value)}).catch(function(e){s(e)})})},n.reopen=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Ams/ServiceRequest/ReOpen",{RequestIds:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.delete=function(e){var n=this;return new Promise(function(i,s){n.cw.runRequest("Ams/ServiceRequest/Delete",{RequestIds:e}).then(function(e){e.Status>0?s(new t(4,e.Message,{response:e})):i(e.Value)}).catch(function(e){s(e)})})},n.search=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Ams/ServiceRequest/Search",e).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.searchObject=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Ams/ServiceRequest/SearchObject",{RequestId:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.createSearchDefinition=function(e,t,n,i,s){var r=this;return void 0===i&&(i=!0),void 0===s&&(s=!0),new Promise(function(n,o){var u=e;h.isString(t)&&(h.set(u,"SearchName",t),h.set(u,"SaveDefinition",i),h.set(u,"EnableEurl",s)),r.cw.runRequest("Ams/ServiceRequest/CreateSearchDefinition",u).then(function(e){n(e.Value)}).catch(function(e){o(e)})})},n.getProblemNodes=function(e,t,n,i){var s=this;return void 0===t&&(t=!1),void 0===i&&(i=!1),new Promise(function(r,o){var u={DomainId:e,IncludeCancelled:i,ViewOnly:t};null!=n&&h.has(n,"DisplayTextMode")&&(h.set(u,"DisplayTextMode",h.get(n,"DisplayTextMode")),"CD"==h.get(n,"DisplayTextMode")&&h.has(n,"DisplayTextDelimeter")&&h.set(u,"DisplayTextDelimeter",h.get(n,"DisplayTextDelimeter"))),s.cw.runRequest("Ams/ServiceRequest/ProblemNodes",u).then(function(e){r(e.Value)}).catch(function(e){o(e)})})},n.getProblems=function(e,t,n){var i=this;return void 0===e&&(e=!1),void 0===t&&(t=!0),new Promise(function(s,r){var o={ForPublicOnly:e,OnlyActiveTemplates:t};void 0!==n&&h.set(o,"DomainIds",n),i.cw.runRequest("Ams/ServiceRequest/Problems",o).then(function(e){s(e.Value)}).catch(function(e){r(e)})})},n.getProblemsByKeywords=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Ams/ServiceRequest/ProblemsByKeywords",{Keywords:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.getPriorities=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Ams/ServiceRequest/Priorities",{ProblemSids:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.getCustomFieldTemplate=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Ams/ServiceRequest/TemplateCustomFields",{ProblemSids:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.getQASettings=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Ams/ServiceRequest/QA",{ProblemSids:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.getProblemLeaf=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Ams/ServiceRequest/ProblemLeafBySid",{ProblemSid:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.getStatuses=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Ams/ServiceRequest/DefaultStatus",{DomainIds:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.getEmployeeLists=function(e,n){var i=this;return new Promise(function(s,r){var o={DomainId:n};h.includes(["DispatchTo","SubmitTo"],e)?i.cw.runRequest("Ams/ServiceRequest/"+e,o).then(function(e){s(e.Value)}).catch(function(e){r(e)}):r(new t(2,"listType must be either SubmitTo or DispatchTo.",{provided:e}))})},n.getDispatchTos=function(e){return this.getEmployeeLists("DispatchTo",e)},n.getSubmitTos=function(e){return this.getEmployeeLists("SubmitTo",e)},n.streetCodes=function(){var e=this;return new Promise(function(t,n){e.cw.runRequest("Ams/ServiceRequest/AllStreetCode",{}).then(function(e){t(e.Value)}).catch(function(e){n(e)})})},n.getTemplatesById=function(e,t,n){var i=this;return new Promise(function(e,s){var r={ProblemSids:null};void 0!==t&&h.set(r,"MinimumDateModified",t),void 0!==n&&h.set(r,"MaximumDateModified",n),i.cw.runRequest("Ams/ServiceRequestTemplate/ByIds",r).then(function(t){e(t.Value)}).catch(function(e){s(e)})})},n.createTemplateSearchDefinition=function(e,t,n,i){var s=this;return void 0===i&&(i=!0),new Promise(function(n,r){var o=e;h.isString(t)&&(h.set(o,"SearchName",t),h.set(o,"SaveDefinition",i)),s.cw.runRequest("Ams/ServiceRequestTemplate/CreateSearchDefinition",o).then(function(e){n(e.Value)}).catch(function(e){r(e)})})},n.getTemplateQAs=function(e,t,n){var i=this;return new Promise(function(e,t){i.cw.runRequest("Ams/ServiceRequestTemplate/QA",{ProblemSids:null}).then(function(t){e(t.Value)}).catch(function(e){t(e)})})},n.searchTemplates=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Ams/ServiceRequestTemplate/Search",e).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.getTemplates=function(e,t,n,i,s){var r=this;return void 0===t&&(t=!1),void 0===n&&(n=!1),new Promise(function(o,u){var c={CanCreate:t,IncludeInactiveIf:n};void 0!==e&&h.set(c,"TemplateIds",e),void 0!==i&&h.set(c,"MinimumDateModified",i),void 0!==s&&h.set(c,"MaximumDateModified",s),r.cw.runRequest("Ams/ServiceRequestTemplate/Templates",c).then(function(e){o(e.Value)}).catch(function(e){u(e)})})},n.getWOTemplates=function(e,t){var n=this;return void 0===t&&(t=!1),new Promise(function(i,s){n.cw.runRequest("Ams/ServiceRequestTemplate/WorkOrderTemplates",{ProblemSids:e,IncludeInactive:t}).then(function(e){i(e.Value)}).catch(function(e){s(e)})})},e}();require("lodash");var l=function(e){this.cw=void 0,this.cw=e},m=require("lodash"),v=function(){function e(e){this.cw=void 0,this.admin=void 0,this.cw=e,this.admin=new l(e)}var n=e.prototype;return n.create=function(e){var n=this;return new Promise(function(i,s){m.has(e,"EntityType")&&m.has(e,"InspTemplateId")?n.cw.runRequest("Ams/Inspection/Create",e).then(function(e){i(e.Value)}).catch(function(e){s(e)}):s(new t(1,"EntityType and InspTemplateId properties must be provided.",{provided:e}))})},n.createFromEntities=function(e){var n=this;return new Promise(function(i,s){m.has(e,"EntityType")&&m.has(e,"InspTemplateId")?n.cw.runRequest("Ams/Inspection/CreateFromEntities",e).then(function(e){i(e.Value)}).catch(function(e){s(e)}):s(new t(1,"EntityType and InspTemplateId properties must be provided.",{provided:e}))})},n.createFromParent=function(e){var n=this;return new Promise(function(i,s){m.has(e,"EntityType")&&m.has(e,"InspTemplateId")&&m.has(e,"InspectionId")?n.cw.runRequest("Ams/Inspection/CreateFromParent",e).then(function(e){i(e.Value)}).catch(function(e){s(e)}):s(new t(1,"EntityType and InspTemplateId properties must be provided.",{provided:e}))})},n.createFromServiceRequest=function(e){var n=this;return new Promise(function(i,s){m.has(e,"EntityType")&&m.has(e,"InspTemplateId")&&m.has(e,"RequestId")?n.cw.runRequest("Ams/Inspection/CreateFromServiceRequest",e).then(function(e){i(e.Value)}).catch(function(e){s(e)}):s(new t(1,"EntityType and InspTemplateId properties must be provided.",{provided:e}))})},n.createFromWorkOrder=function(e){var n=this;return new Promise(function(i,s){m.has(e,"EntityType")&&m.has(e,"InspTemplateId")&&m.has(e,"WorkOrderSid")?n.cw.runRequest("Ams/Inspection/CreateFromWorkOrder",e).then(function(e){i(e.Value)}).catch(function(e){s(e)}):s(new t(1,"EntityType and InspTemplateId properties must be provided.",{provided:e}))})},n.update=function(e){var n=this;return new Promise(function(i,s){return new Promise(function(i,s){m.has(e,"InspectionId")?n.cw.runRequest("Ams/Inspection/Update",e).then(function(e){i(e.Value)}).catch(function(e){s(e)}):s(new t(1,"InspectionId must be provided.",{provided:e}))})})},n.getById=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Ams/Inspection/ById",{InspectionId:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.getByIds=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Ams/Inspection/ByIds",{InspectionIds:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.cancel=function(e,t,n){var i=this;return new Promise(function(s,r){var o={InspectionIds:e};void 0!==t&&(o.CancelReason=t),void 0!==n&&(o.DateCancelled=n),i.cw.runRequest("Ams/Inspection/Cancel",o).then(function(e){s(e.Value)}).catch(function(e){r(e)})})},n.uncancel=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Ams/Inspection/Uncancel",{InspectionIds:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.close=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Ams/Inspection/Close",{InspectionIds:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.reopen=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Ams/Inspection/Reopen",{InspectionIds:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.delete=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Ams/Inspection/Delete",{InspectionIds:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.search=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Ams/Inspection/Search",e).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.searchObject=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Ams/ServiceRequest/SearchObject",{InspectionId:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.statuses=function(){var e=this;return new Promise(function(t,n){e.cw.runRequest("Ams/Inspection/Statuses",{}).then(function(e){t(e.Value)}).catch(function(e){n(e)})})},n.submitTos=function(e,t){var n=this;return void 0===e&&(e=!1),new Promise(function(i,s){var r={};e&&(r.IncludeInactiveEmployees=!0),void 0!==t&&(r.DomainIds=t),n.cw.runRequest("Ams/Inspection/SubmitTos",r).then(function(e){i(e.Value)}).catch(function(e){s(e)})})},n.connectAsset=function(e,t,n,i){var s=this;return void 0===i&&(i={}),new Promise(function(n,r){var o={InspectionId:t};m.has(e,"EntityType")&&m.has(e,"EntityUid")?(o.EntityType=e.EntityType,o.EntityUid=e.EntityUid):m.has(e,"Entity")&&(o.Entity=e.Entity),m.has(i,"Facility_Id")&&(o.Facility_Id=i.Facility_Id),m.has(i,"Level_Id")&&(o.Level_Id=i.Level_Id),s.cw.runRequest("Ams/Inspection/AddEntity",o).then(function(e){n(e.Value)}).catch(function(e){r(e)})})},n.getAnswers=function(e){var t=this;return new Promise(function(n,i){var s={};0==e.length?s.InspectionId=e[0]:s.InspectionIds=e,t.cw.runRequest("Ams/Inspection/Answers",s).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.getAuditLog=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Ams/Inspection/AuditLog",{InspectionId:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.createSearchDefinition=function(e,t,n,i,s){var r=this;return void 0===i&&(i=!0),void 0===s&&(s=!0),new Promise(function(n,o){var u=e;m.isString(t)&&(m.set(u,"SearchName",t),m.set(u,"SaveDefinition",i),m.set(u,"EnableEurl",s)),r.cw.runRequest("Ams/Inspection/CreateSearchDefinition",u).then(function(e){n(e.Value)}).catch(function(e){o(e)})})},n.getCycleFrom=function(){var e=this;return new Promise(function(t,n){e.cw.runRequest("Ams/Inspection/CycleFrom",{}).then(function(e){t(e.Value)}).catch(function(e){n(e)})})},n.getCycleIntervals=function(){var e=this;return new Promise(function(t,n){e.cw.runRequest("Ams/Inspection/CycleIntervals",{}).then(function(e){t(e.Value)}).catch(function(e){n(e)})})},n.getCycleTypes=function(){var e=this;return new Promise(function(t,n){e.cw.runRequest("Ams/Inspection/CycleTypes",{}).then(function(e){t(e.Value)}).catch(function(e){n(e)})})},n.getDistricts=function(){var e=this;return new Promise(function(t,n){e.cw.runRequest("Ams/Inspection/Districts",{}).then(function(e){t(e.Value)}).catch(function(e){n(e)})})},n.getEmployeeLists=function(e,n,i){var s=this;return void 0===n&&(n=!1),new Promise(function(r,o){var u={IncludeInactiveEmployees:n};void 0!==i&&null!=i&&m.set(u,"DomainIds",i),"SubmitTos"!=e?o(new t(2,'listType must be "SubmitTos".',{provided:e})):s.cw.runRequest("Ams/Inspection/"+e,u).then(function(e){r(e.Value)}).catch(function(e){o(e)})})},n.getSubmitTos=function(e,t){return void 0===e&&(e=!1),this.getEmployeeLists("SubmitTos",e,t)},n.move=function(e,n,i,s,r){var o=this;return new Promise(function(u,c){m.has(s,"WKID")||m.has(s,"WKT")||c(new t(3,"You must provide either the WKID or WKT for the x/y coordinates.",{projection:s}));var a={InspectionId:e,X:n,Y:i};void 0!==r&&m.set(a,"Z",r);var d=m.merge(a,s);o.cw.runRequest("Ams/Inspection/Move",d).then(function(e){u(e.Value)}).catch(function(e){c(e)})})},n.getTemplates=function(e,t,n){var i=this;return new Promise(function(s,r){var o={};void 0!==e&&(o.EntityTypes=e),o.CanCreate=void 0===t||t,"object"==typeof n&&m.forIn(n,function(e,t){o[t]=e}),i.cw.runRequest("Ams/InspectionTemplate/Templates",o).then(function(e){s(e.Value)}).catch(function(e){r(e)})})},n.getTemplatesByIds=function(e,t){var n=this;return new Promise(function(i,s){var r={InspTemplateIds:e};"object"==typeof t&&m.forIn(t,function(e,t){r[t]=e}),n.cw.runRequest("Ams/InspectionTemplate/ByIds",r).then(function(e){i(e.Value)}).catch(function(e){s(e)})})},n.getTemplateEntityTypes=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Ams/InspectionTemplate/EntityTypes",{InspTemplateIds:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.getQA=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Ams/InspectionTemplate/QA",{InspTemplateIds:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.getQConditions=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Ams/InspectionTemplate/QuestionConditions",{InspTemplateIds:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.deleteAttachments=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Ams/Attachments/DeleteInspectionAttachments",{AttachmentIds:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.downloadAttachment=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Ams/Attachments/DownloadInspectionAttachment",{AttachmentId:e}).then(function(e){}).catch(function(e){i(e)})})},n.getAttachmentById=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Ams/Attachments/InspectionAttachmentById",{AttachmentId:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.getAttachments=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Ams/Attachments/InspectionAttachments",{InspectionIds:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},e}();require("lodash");var p=function(e){this.cw=void 0,this.cw=e},w=require("lodash"),y=function(){function e(e){this.cw=void 0,this.admin=void 0,this.cw=e,this.admin=new p(e)}var n=e.prototype;return n.create=function(e,n,i){var s=this;return new Promise(function(r,o){if(w.has(e,"WOTemplateId")&&w.has(e,"EntityType")){var u=e;void 0===n||null==n||w.has(u,"InspectionIds")||w.set(u,"InspectionIds",n),void 0===i||null==i||w.has(u,"RequestIds")||w.set(u,"RequestIds",i),s.cw.runRequest("Ams/WorkOrder/Create",u).then(function(e){r(e.Value)}).catch(function(e){o(e)})}else o(new t(2,"WOTemplateId & EntityType must be provided.",{provided:e}))})},n.createFromParent=function(e,n,i){var s=this;return new Promise(function(i,r){if(w.has(e,"WOTemplateId")&&w.has(e,"EntityType")){var o=e;w.isString(n)?w.set(o,"WorkOrderId",n):w.set(o,"WorkOrderSid",n),s.cw.runRequest("Ams/WorkOrder/Create",o).then(function(e){i(e.Value)}).catch(function(e){r(e)})}else r(new t(2,"WOTemplateId & EntityType must be provided.",{provided:e}))})},n.update=function(e){var n=this;return new Promise(function(i,s){w.has(e,"WorkOrderSid")||w.has(e,"WorkOrderId")?n.cw.runRequest("Ams/WorkOrder/Update",e).then(function(e){i(e.Value)}).catch(function(e){s(e)}):s(new t(3,"WorkOrderId or WorkOrderSid must be provided.",{provided:e}))})},n.combine=function(e,n,i){var s=this;return void 0===i&&(i=!0),new Promise(function(r,o){s.cw.runRequest("Ams/WorkOrder/Combine",{CancelCombinedWorkOrders:i,ToWorkOrderId:n,FromWorkOrderIds:e}).then(function(e){e.Status>0?o(new t(4,e.Message,{response:e})):r(e.Value)}).catch(function(e){o(e)})})},n.move=function(e,n,i,s,r){var o=this;return new Promise(function(u,c){w.has(s,"WKID")||w.has(s,"WKT")||c(new t(6,"You must provide either the WKID or WKT for the x/y coordinates.",{projection:s}));var a={WorkOrderId:e,X:n,Y:i};void 0!==r&&w.set(a,"z",r);var d=w.merge(a,s);o.cw.runRequest("Ams/WorkOrder/Move",d).then(function(e){u(e.Value)}).catch(function(e){c(e)})})},n.getById=function(e,t){var n=this;return new Promise(function(t,i){var s={};if(w.isString(e)){w.set(s,"WorkOrderId",e);var r="Ams/WorkOrder/ById"}else w.set(s,"WorkOrderSid",e),r="Ams/WorkOrder/BySid";n.cw.runRequest(r,s).then(function(e){t(e.Value)}).catch(function(e){i(e)})})},n.getByIds=function(e){var n=this;return new Promise(function(i,s){var r={};if(0==e.length)s(new t(10,"No workorder S/IDs were provided.",{workorderSId:e}));else{var o="Ams/WorkOrder/ByIds";w.isString(e[0])?(w.set(r,"WorkOrderIds",e),o="Ams/WorkOrder/ByIds"):w.isNumber(e[0])?(w.set(r,"WorkOrderSids",e),o="Ams/WorkOrder/BySids"):s(new t(9,"No workorder S/IDs were provided.",{workorderSId:e})),n.cw.runRequest(o,r).then(function(e){i(e.Value)}).catch(function(e){s(e)})}})},n.getInstructions=function(e){var n=this;return new Promise(function(i,s){var r={};if(0==e.length)s(new t(10,"No workorder S/IDs were provided.",{workorderSId:e}));else{var o="Ams/WorkOrder/ByIds";w.isString(e[0])?(w.set(r,"WorkOrderIds",e),o="Ams/WorkOrder/InstructionsByWorkOrderIds"):w.isNumber(e[0])?(w.set(r,"WorkOrderSids",e),o="Ams/WorkOrder/InstructionsByWorkOrderSids"):s(new t(9,"No workorder S/IDs were provided.",{workorderSId:e})),n.cw.runRequest(o,r).then(function(e){i(e.Value)}).catch(function(e){s(e)})}})},n.getAuditLog=function(e){var n=this;return new Promise(function(i,s){var r={};w.isString(e)?w.set(r,"WorkOrderId",e):w.isNumber(e)?w.set(r,"WorkOrderSid",e):s(new t(9,"Workorder S/IDs was not provided.",{workorderSId:e})),n.cw.runRequest("Ams/WorkOrder/AuditLog",r).then(function(e){i(e.Value)}).catch(function(e){s(e)})})},n.getCustomFieldValues=function(e){var n=this;return new Promise(function(i,s){var r={},o="Ams/WorkOrder/CustomFields";w.isString(e[0])?(w.set(r,"WorkOrderIds",e),o="Ams/WorkOrder/CustomFields"):w.isNumber(e[0])?(w.set(r,"WorkOrderSids",e),o="Ams/WorkOrder/CustomFieldsByWorkOrderSids"):s(new t(9,"No workorder S/IDs were provided.",{workorderSIds:e})),n.cw.runRequest(o,r).then(function(e){i(e.Value)}).catch(function(e){s(e)})})},n.comment=function(e,n){var i=this;return new Promise(function(s,r){var o={Comments:n};w.isString(e)?w.set(o,"WorkOrderId",e):w.isNumber(e)?w.set(o,"WorkOrderSid",e):r(new t(9,"Workorder S/IDs was not provided.",{workorderSId:e})),i.cw.runRequest("Ams/WorkOrder/AddComments",o).then(function(e){s(e.Value)}).catch(function(e){r(e)})})},n.getEntities=function(e,n){var i=this;return void 0===n&&(n=!0),new Promise(function(s,r){var o={GetGisData:n};0==e.length?r(new t(11,"No workorder S/IDs were provided.",{workorderSId:e})):w.isString(e[0])?w.set(o,"WorkOrderIds",e):w.isNumber(e[0])?w.set(o,"WorkOrderSids",e):r(new t(12,"No workorder S/IDs were provided.",{workorderSId:e})),i.cw.runRequest("Ams/WorkOrder/Entities",o).then(function(e){e.Status>0?r(new t(4,e.Message,{response:e})):s(e.Value)}).catch(function(e){r(e)})})},n.addEntities=function(e,n,i){var s=this;return void 0===i&&(i=!0),new Promise(function(r,o){var u={UpdateXY:i};w.isString(e)?w.set(u,"WorkOrderId",e):w.set(u,"WorkOrderSid",e),w.has(n,"Facility_Id")&&w.set(u,"Facility_Id",w.get(n,"Facility_Id")),w.has(n,"Level_Id")&&w.set(u,"Level_Id",w.get(n,"Level_Id")),w.has(n,"EntityUids")&&w.has(n,"EntityType")?(w.set(u,"EntityUids",w.get(n,"EntityUids")),w.set(u,"EntityType",w.get(n,"EntityType"))):o(new t(7,"No entity info was provided.",{workorderSId:e,entityInfo:n})),s.cw.runRequest("Ams/WorkOrder/AddEntities",u).then(function(e){e.Status>0?o(new t(4,e.Message,{response:e})):r(e.Value)}).catch(function(e){o(e)})})},n.updateEntity=function(e,n,i){var s=this;return void 0===i&&(i=!1),new Promise(function(r,o){var u={WorkComplete:i};w.isString(e)?w.set(u,"WorkOrderId",e):w.set(u,"WorkOrderSid",e),w.has(n,"Facility_Id")&&w.set(u,"Facility_Id",w.get(n,"Facility_Id")),w.has(n,"Level_Id")&&w.set(u,"Level_Id",w.get(n,"Level_Id")),w.has(n,"EntityUids")&&w.has(n,"EntityType")?(w.set(u,"EntityUid",w.get(n,"EntityUid")),w.set(u,"EntityType",w.get(n,"EntityType"))):o(new t(7,"No entity info was provided.",{workorderSId:e,entityInfo:n})),s.cw.runRequest("Ams/WorkOrder/UpdateEntity",u).then(function(e){e.Status>0?o(new t(4,e.Message,{response:e})):r(e.Value)}).catch(function(e){o(e)})})},n.removeEntities=function(e,n,i){var s=this;return void 0===i&&(i=!0),new Promise(function(r,o){var u={UpdateXY:i};w.isString(e)?w.set(u,"WorkOrderId",e):w.set(u,"WorkOrderSid",e),w.has(n,"ObjectIds")?w.set(u,"ObjectIds",w.get(n,"ObjectIds")):w.has(n,"EntityUids")&&w.has(n,"EntityType")?(w.set(u,"EntityUids",w.get(n,"EntityUids")),w.set(u,"EntityType",w.get(n,"EntityType"))):o(new t(8,"No entity info was provided.",{workorderSId:e,entityInfo:n})),s.cw.runRequest("Ams/WorkOrder/RemoveEntities",u).then(function(e){e.Status>0?o(new t(4,e.Message,{response:e})):r(e.Value)}).catch(function(e){o(e)})})},n.cancel=function(e,t,n){var i=this;return new Promise(function(s,r){var o={WorkOrderIds:e};void 0!==t&&w.set(o,"CancelReason",t),void 0!==n&&w.set(o,"DateCancelled",n),i.cw.runRequest("Ams/WorkOrder/Cancel",o).then(function(e){s(e.Value)}).catch(function(e){r(e)})})},n.uncancel=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Ams/WorkOrder/Uncancel",{WorkOrderIds:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.close=function(e){var n=this;return new Promise(function(i,s){n.cw.runRequest("Ams/WorkOrder/Close",{WorkOrderIds:e}).then(function(e){e.Status>0?s(new t(5,e.Message,{response:e})):i(e.Value)}).catch(function(e){s(e)})})},n.reopen=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Ams/WorkOrder/ReOpen",{WorkOrderIds:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.delete=function(e){var n=this;return new Promise(function(i,s){n.cw.runRequest("Ams/WorkOrder/Delete",{WorkOrderIds:e}).then(function(e){e.Status>0?s(new t(4,e.Message,{response:e})):i(e.Value)}).catch(function(e){s(e)})})},n.getWOsByEntities=function(e,n,i,s){var r=this;return void 0===s&&(s=!0),new Promise(function(o,u){var c={};void 0!==i&&w.merge(c,i),w.has(c,"EntityType")||w.set(c,"EntityType",e),w.has(c,"EntityUids")||w.set(c,"EntityUids",n);var a="Ams/WorkOrder/SearchForSids";s||(a="Ams/WorkOrder/Search"),r.cw.runRequest(a,c).then(function(e){e.Status>0?u(new t(4,e.Message,{response:e})):o(e.Value)}).catch(function(e){u(e)})})},n.getSearchList=function(e){var n=this;return new Promise(function(i,s){var r={};w.set(r,"WorkOrderId",e),n.cw.runRequest("Ams/WorkOrder/SearchObject",r).then(function(e){e.Status>0?s(new t(4,e.Message,{response:e})):i(e.Value)}).catch(function(e){s(e)})})},n.getEmployeeLists=function(e,n,i){var s=this;return void 0===n&&(n=!1),new Promise(function(r,o){var u={IncludeInactiveEmployees:n};void 0!==i&&null!=i&&w.set(u,"DomainIds",i),w.includes(["Supervisors","SubmitTos"],e)?s.cw.runRequest("Ams/WorkOrder/"+e,u).then(function(e){r(e.Value)}).catch(function(e){o(e)}):o(new t(2,"listType must be either SubmitTos or Supervisors.",{provided:e}))})},n.getSubmitTos=function(e,t){return void 0===e&&(e=!1),this.getEmployeeLists("SubmitTos",e,t)},n.getSupervisors=function(e,t){return void 0===e&&(e=!1),this.getEmployeeLists("Supervisors",e,t)},n.getStatuses=function(){var e=this;return new Promise(function(t,n){e.cw.runRequest("Ams/WorkOrder/Statuses",{}).then(function(e){t(e.Value)}).catch(function(e){n(e)})})},n.getCategories=function(){var e=this;return new Promise(function(t,n){e.cw.runRequest("Ams/WorkOrder/Categories",{}).then(function(e){t(e.Value)}).catch(function(e){n(e)})})},n.getPriorities=function(){var e=this;return new Promise(function(t,n){e.cw.runRequest("Ams/WorkOrder/Priorities",{}).then(function(e){t(e.Value)}).catch(function(e){n(e)})})},n.getCycleFrom=function(){var e=this;return new Promise(function(t,n){e.cw.runRequest("Ams/WorkOrder/CycleFrom",{}).then(function(e){t(e.Value)}).catch(function(e){n(e)})})},n.getCycleIntervals=function(){var e=this;return new Promise(function(t,n){e.cw.runRequest("Ams/WorkOrder/CycleIntervals",{}).then(function(e){t(e.Value)}).catch(function(e){n(e)})})},n.getCycleTypes=function(){var e=this;return new Promise(function(t,n){e.cw.runRequest("Ams/WorkOrder/CycleTypes",{}).then(function(e){t(e.Value)}).catch(function(e){n(e)})})},n.getStages=function(){var e=this;return new Promise(function(t,n){e.cw.runRequest("Ams/WorkOrder/Stages",{}).then(function(e){t(e.Value)}).catch(function(e){n(e)})})},n.getExpenseTypes=function(){var e=this;return new Promise(function(t,n){e.cw.runRequest("Ams/WorkOrder/ExpenseTypes",{}).then(function(e){t(e.Value)}).catch(function(e){n(e)})})},e}();require("lodash");var I=function(e){this.cw=void 0,this.cw=e},P=require("lodash"),R=function(){function e(e){this.cw=void 0,this.cw=e}var n=e.prototype;return n.addFee=function(e,t,n){var i=this;return new Promise(function(s,r){var o=P.merge({CaObjectId:e,FeeSetupId:t},n);i.cw.runRequest("Pll/CaseFees/Add",o).then(function(e){s(e.Value)}).catch(function(e){r(e)})})},n.addPayment=function(e,t){var n=this;return new Promise(function(i,s){var r=P.merge({CaObjectId:e},t);n.cw.runRequest("Pll/CasePayment/Add",r).then(function(e){i(e.Value)}).catch(function(e){s(e)})})},n.addRefund=function(e,t,n){var i=this;return new Promise(function(s,r){i.cw.runRequest("Pll/CasePaymentRefund/Add",{CaPaymentId:e,RefundAmount:t,Comments:n}).then(function(e){s(e.Value)}).catch(function(e){r(e)})})},n.addDepositPayment=function(e,t){var n=this;return new Promise(function(i,s){var r=P.merge({CaDepositId:e},t);n.cw.runRequest("Pll/CasePayment/AddDeposit",r).then(function(e){i(e.Value)}).catch(function(e){s(e)})})},n.addDeposit=function(e,t,n,i){var s=this;return new Promise(function(r,o){var u={CaObjectId:e,DepositId:t};void 0!==n&&P.set(u,"Amount",n),void 0!==i&&P.set(u,"CommentText",i),s.cw.runRequest("CaseDeposit/Add",u).then(function(e){r(e.Value)}).catch(function(e){o(e)})})},n.addInstrument=function(e,t,n,i,s){var r=this;return new Promise(function(o,u){var c=P.merge({CaObjectId:e,InstTypeId:t,Amount:n,DateExpire:i},s);r.cw.runRequest("Pll/CaseInstrument/Add",c).then(function(e){o(e.Value)}).catch(function(e){u(e)})})},n.updateFee=function(e,t){var n=this;return new Promise(function(i,s){var r=P.merge({CaFeeId:e},t);n.cw.runRequest("Pll/CaseFees/Update",r).then(function(e){i(e.Value)}).catch(function(e){s(e)})})},n.voidRefund=function(e,t){var n=this;return new Promise(function(i,s){n.cw.runRequest("Pll/CasePaymentRefund/Update",{CaPaymentRefundId:e,Voided:t}).then(function(e){i(e.Value)}).catch(function(e){s(e)})})},n.addDefaultFees=function(e,t){var n=this;return new Promise(function(i,s){n.cw.runRequest("Pll/CaseFees/AddDefault",{CaObjectId:e,BusCaseId:t}).then(function(e){i(e.Value)}).catch(function(e){s(e)})})},n.addDefaultDeposits=function(e,t){var n=this;return new Promise(function(i,s){n.cw.runRequest("Pll/CaseDeposit/AddDefault",{CaObjectId:e,BusCaseId:t}).then(function(e){i(e.Value)}).catch(function(e){s(e)})})},n.getFees=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Pll/CaseFees/ByCaObjectId",{CaObjectId:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.getDeposits=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Pll/CaseDeposit/ByCaObjectId",{CaObjectId:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.getPayments=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Pll/CasePayment/ByCaObjectId",{CaObjectId:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.getInstruments=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Pll/CaseInstrument/ByCaObjectId",{CaObjectId:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.deleteFee=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Pll/CaseFees/Delete",{CaFeeId:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.deleteFeesByCaseId=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Pll/CaseFees/DeleteByCaObjectId",{CaObjectId:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.deletePayment=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Pll/CasePayment/Delete",{CaFeeId:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.deleteRefund=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Pll/CasePaymentRefund/Delete",{CaPaymentRefundId:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.deletePaymentsByCaseId=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Pll/CasePayment/DeleteByCaObjectId",{CaObjectId:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.deleteDeposit=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Pll/CaseDeposit/Delete",{CaDepositId:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.deleteDepositsByCaseId=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Pll/CaseDeposit/DeleteByCaObjectId",{CaObjectId:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.deleteInstrument=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Pll/CaseInstrument/Delete",{CaInstrumentId:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.deleteInstrumentsByCaseId=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Pll/CaseInstrument/DeleteByCaObjectId",{CaObjectId:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.searchFees=function(e){var n=this;return new Promise(function(i,s){0==P.intersectionBy(e,["CaFeeId","CaObjectId","FeeCode","FeeDesc"]).length&&s(new t(4,"At least one of the attributes (CaFeeId, CaObjectId, FeeCode, FeeDesc) must be defined.")),n.cw.runRequest("Pll/CaseFees/Search",e).then(function(e){i(e.Value)}).catch(function(e){s(e)})})},n.searchPayments=function(e){var n=this;return new Promise(function(i,s){0==P.intersectionBy(e,["CaPaymentId","CommentText","FeeAmount","FeeCode","FeeDesc","PaymentAccount","PaymentAmount","TenderType"]).length&&s(new t(5,"At least one of the attributes (CaPaymentId, CommentText, FeeAmount, FeeCode, FeeDesc, PaymentAccount, PaymentAmount, TenderType) must be defined.")),n.cw.runRequest("Pll/CasePayment/Search",e).then(function(e){i(e.Value)}).catch(function(e){s(e)})})},n.searchRefunds=function(e){var n=this;return new Promise(function(i,s){0==P.intersectionBy(e,["CaPaymentId","CaPaymentRefundId","Comments","RefundAmount"]).length&&s(new t(6,"At least one of the attributes (CaPaymentId, CaPaymentRefundId, Comments, RefundAmount) must be defined.")),n.cw.runRequest("Pll/CasePayment/Search",e).then(function(e){i(e.Value)}).catch(function(e){s(e)})})},n.searchDeposits=function(e){var n=this;return new Promise(function(i,s){0==P.intersectionBy(e,["CaDepositId","CaObjectId","DepositCode","DepositDesc"]).length&&s(new t(1,"At least one of the arguments (CaDepositId, CaObjectId, DepositCode, DepositDesc) must be defined.")),n.cw.runRequest("Pll/CaseDeposit/Search",e).then(function(e){i(e.Value)}).catch(function(e){s(e)})})},n.getAllFeeTemplates=function(){var e=this;return new Promise(function(t,n){e.cw.runRequest("Pll/FeeSetup/All",{}).then(function(e){t(e.Value)}).catch(function(e){n(e)})})},n.searchFeeTemplates=function(e){var n=this;return new Promise(function(i,s){0==P.intersectionBy(e,["FeeSetupId","FeeTypeId","FeeCode","FeeDesc","AccountCode"]).length&&s(new t(7,"At least one of the arguments (FeeSetupId, FeeTypeId, FeeCode, FeeDesc, AccountCode) must be defined.")),n.cw.runRequest("Pll/FeeSetup/Search",e).then(function(e){i(e.Value)}).catch(function(e){s(e)})})},n.searchCaseInstruments=function(e){var n=this;return new Promise(function(i,s){0==P.intersectionBy(e,["AddressLine1","Amount","CaInstrumentId","CityName","CommentText","Company","ContactEmail","ContactName","ContactPhone","CountryCode","InstTypeId","SerialNumber","StateCode","ZipCode"]).length&&s(new t(9,"At least one of the arguments (AddressLine1, Amount, CaInstrumentId, CityName, CommentText, Company, ContactEmail, ContactName, ContactPhone, CountryCode, InstTypeId, SerialNumber, StateCode, ZipCode) must be defined.")),n.cw.runRequest("Pll/CaseInstrument/Search",e).then(function(e){i(e.Value)}).catch(function(e){s(e)})})},n.getInstrumentList=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Pll/CaseInstrument/GetList",e).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.addCaseInstrumentRelease=function(e,n,i,s,r,o){var u=this;return new Promise(function(c,a){var d={CaInstrumentId:e,DateReleased:i,ReleasedBy:n};void 0===r&&null==r||void 0===s&&null==s?void 0!==r&&null!=r?P.set(d,"PercentReleased",r):void 0!==s&&null!=s&&P.set(d,"AmountReleased",s):a(new t(2,"Either amountReleased or percentReleased must be specified.")),void 0!==o&&P.set(d,"CommentText",o),u.cw.runRequest("Pll/CaseInstReleases/Add",d).then(function(e){c(e.Value)}).catch(function(e){a(e)})})},n.deleteCaseInstrumentRelease=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Pll/CaseInstReleases/Delete",{CaInstReleasesId:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.searchCaseInstrumentReleases=function(e){var n=this;return new Promise(function(i,s){var r=e;0==P.intersectionBy(e,["AmountReleased","CaInstReleasesId","CaInstrumentId","CommentText","PercentReleased","ReleasedBy"]).length&&s(new t(3,"At least one of the attributes (AmountReleased, CaInstReleasesId, CaInstrumentId, CommentText, PercentReleased, ReleasedBy) must be defined.")),n.cw.runRequest("Pll/CaseInstReleases/Search",r).then(function(e){i(e.Value)}).catch(function(e){s(e)})})},n.fees=function(){var e=this;return new Promise(function(t,n){e.cw.runRequest("Pll/FeeSetup/All",{}).then(function(e){t(e.Value)}).catch(function(e){n(e)})})},n.searchAvailableFees=function(e){var n=this;return new Promise(function(i,s){0==P.intersectionBy(e,["AccountCode","FeeCode","FeeDesc","FeeSetupId","FeeTypeId"]).length&&s(new t(8,"At least one of the attributes (AccountCode, FeeCode, FeeDesc, FeeSetupId, FeeTypeId) must be defined.")),n.cw.runRequest("Pll/FeeSetup/Search",e).then(function(e){i(e.Value)}).catch(function(e){s(e)})})},n.getTenderTypes=function(){var e=this;return new Promise(function(t,n){e.cw.runRequest("Pll/TenderType/All",{}).then(function(e){t(e.Value)}).catch(function(e){n(e)})})},n.addTenderType=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Pll/TenderType/Add",e).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.updateTenderType=function(e,t){var n=this;return new Promise(function(i,s){var r=P.merge({TenderTypeId:e},t);n.cw.runRequest("Pll/TenderType/Update",r).then(function(e){i(e.Value)}).catch(function(e){s(e)})})},e}();require("lodash");var C=function(e){this.cw=void 0,this.cw=e},q=require("lodash"),T=function(){function e(e){this.cw=void 0,this.cw=e}var n=e.prototype;return n.addBusinessCaseTemplate=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Pll/BusinessCase/Add",e).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.updateBusinessCaseTemplate=function(e,t){var n=this;return new Promise(function(i,s){var r=q.merge({BusCaseId:e},t);n.cw.runRequest("Pll/BusinessCase/Update",r).then(function(e){i(e.Value)}).catch(function(e){s(e)})})},n.getBusinessCaseTemplates=function(){var e=this;return new Promise(function(t,n){e.cw.runRequest("Pll/BusinessCase/GetList",{}).then(function(e){t(e.Value)}).catch(function(e){n(e)})})},n.addCaseType=function(e,t,n){var i=this;return new Promise(function(s,r){var o=q.merge({CaseType:e,CaseTypeDesciption:t},n);i.cw.runRequest("Pll/CaseType/Add",o).then(function(e){s(e.Value)}).catch(function(e){r(e)})})},n.updateCaseType=function(e,t){var n=this;return new Promise(function(i,s){var r=q.merge({CaseTypeId:e},t);n.cw.runRequest("Pll/CaseType/GetList",r).then(function(e){i(e.Value)}).catch(function(e){s(e)})})},n.getCaseTypes=function(){var e=this;return new Promise(function(t,n){e.cw.runRequest("Pll/CaseType/GetList",{}).then(function(e){t(e.Value)}).catch(function(e){n(e)})})},n.searchCaseTypeIDs=function(e){var n=this;return new Promise(function(i,s){0==q.intersectionBy(e,["CaseType","CaseTypeDesc","CaseTypeId"]).length&&s(new t(2,"At least one of the attributes (CaFeeId, CaObjectId, FeeCode, FeeDesc) must be defined.")),n.cw.runRequest("Pll/CaseType/Search",e).then(function(e){i(e.Value)}).catch(function(e){s(e)})})},n.searchCaseTypeObjects=function(e){var n=this;return new Promise(function(i,s){0==q.intersectionBy(e,["CaseType","CaseTypeDesc","CaseTypeId"]).length&&s(new t(3,"At least one of the attributes (CaseType, CaseTypeDesc, CaseTypeId) must be defined.")),n.cw.runRequest("Pll/CaseType/SearchObject",e).then(function(e){i(e.Value)}).catch(function(e){s(e)})})},n.addSubtype=function(e,t,n){var i=this;return new Promise(function(s,r){var o=q.merge({SubType:e,SubTypeDesc:t},n);i.cw.runRequest("Pll/SubType/Add",o).then(function(e){s(e.Value)}).catch(function(e){r(e)})})},n.updateSubtype=function(e,t){var n=this;return new Promise(function(i,s){var r=q.merge({SubTypeId:e},t);n.cw.runRequest("Pll/SubType/Update",r).then(function(e){i(e.Value)}).catch(function(e){s(e)})})},n.getSubtypes=function(){var e=this;return new Promise(function(t,n){e.cw.runRequest("Pll/SubType/GetList",{}).then(function(e){t(e.Value)}).catch(function(e){n(e)})})},n.addDepartment=function(e,t,n){var i=this;return new Promise(function(s,r){var o=q.merge({DepartmentCode:e,DepartmentName:t},n);i.cw.runRequest("Pll/Department/Add",o).then(function(e){s(e.Value)}).catch(function(e){r(e)})})},n.getDepartments=function(){var e=this;return new Promise(function(t,n){e.cw.runRequest("Pll/Department/GetList",{}).then(function(e){t(e.Value)}).catch(function(e){n(e)})})},n.getFees=function(){var e=this;return new Promise(function(t,n){e.cw.runRequest("Pll/FeeSetup/All",{}).then(function(e){t(e.Value)}).catch(function(e){n(e)})})},n.searchFees=function(e){var n=this;return new Promise(function(i,s){0==q.intersectionBy(e,["AccountCode","FeeCode","FeeDesc","FeeSetupId","FeeTypeId"]).length&&s(new t(4,"At least one of the attributes (AccountCode, FeeCode, FeeDesc, FeeSetupId, FeeTypeId) must be defined.")),n.cw.runRequest("Pll/FeeSetup/Search",e).then(function(e){i(e.Value)}).catch(function(e){s(e)})})},e}(),S=require("lodash"),g=function(){function e(e){this.cw=void 0,this.data=void 0,this.workflow=void 0,this.financial=void 0,this.admin=void 0,this.cw=e,this.data=new I(e),this.workflow=new C(e),this.financial=new R(e),this.admin=new T(e)}var n=e.prototype;return n.create=function(e,t,n){var i=this;return new Promise(function(s,r){var o=S.merge({CaseTypeId:e,SubTypeId:t},n);i.cw.runRequest("Pll/Case/Create",o).then(function(e){s(e.Value)}).catch(function(e){r(e)})})},n.createChild=function(e,t,n){var i=this;return new Promise(function(s,r){var o=S.merge({BusCaseId:e,ParentCaObjectId:t},n);i.cw.runRequest("Pll/Case/CreateChild",o).then(function(e){s(e.Value)}).catch(function(e){r(e)})})},n.createFromRequest=function(e,t,n,i){var s=this;return new Promise(function(r,o){var u=S.merge({CaseTypeId:e,SubTypeId:t,ServiceRequestId:n},i);s.cw.runRequest("Pll/CaseObject/CreateCaseFromServiceRequest",u).then(function(e){r(e.Value)}).catch(function(e){o(e)})})},n.update=function(e,t){var n=this;return new Promise(function(i,s){var r=S.merge({CaObjectId:e},t);n.cw.runRequest("Pll/CaseObject/Update",r).then(function(e){i(e.Value)}).catch(function(e){s(e)})})},n.getByIds=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Pll/CaseObject/ByIds",{CaObjectIds:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.search=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Pll/CaseObject/Search",e).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},n.move=function(e,n,i,s,r){var o=this;return new Promise(function(u,c){S.has(s,"WKID")||S.has(s,"WKT")||c(new t(1,"You must provide either the WKID or WKT for the x/y coordinates.",{projection:s}));var a={CaObjectId:e,X:n,Y:i};void 0!==r&&S.set(a,"Z",r);var d=S.merge(a,s);o.cw.runRequest("Pll/CaseObject/Move",d).then(function(e){u(e.Value)}).catch(function(e){c(e)})})},n.delete=function(e){var t=this;return new Promise(function(n,i){t.cw.runRequest("Pll/CaseObject/DeleteCase",{CaObjectId:e}).then(function(e){n(e.Value)}).catch(function(e){i(e)})})},e}(),A=require("https"),k=require("querystring"),V=require("lodash");module.exports=function(){function e(e,t,n){this.base_url=void 0,this.Token=void 0,this.login=void 0,this.password=void 0,this.gisToken=void 0,this.gisTokenUrl=void 0,this.settings=void 0,this.error=void 0,this.general=void 0,this.activity_link=void 0,this.message_queue=void 0,this.gis=void 0,this.search=void 0,this.request=void 0,this.inspection=void 0,this.workorder=void 0,this.case=void 0,this.extensions=void 0,this.features=void 0,this.potential_loads=void 0,this.base_url="cityworksonline",this.extensions={UnknownExtension:0,CwAnalytics:1,WebHooks:2,PLLPublicApp:3,ActivityUpdate:4,SingleSignOn:5},this.features={UnknownFeature:0,ViewInspections:1,EditInspections:2,ViewServiceRequest:3,EditServiceRequest:4,ViewWorkOrder:5,EditWorkOrder:6,EquipmentCheckOut:7,OfficeField:8,Respond:9,Eurl:10,PaverInterface:11,Contracts:12,Storeroom:13,PLL:14,Cw4XL:15,TableEditor:16,CCTVInterface:17,MobileAndroid:18,MobileiOS:19,PerformanceBudgeting:20,Insights:21,RespondCase:22,RespondInspection:23,RespondServiceRequest:24,RespondTaskManager:25,RespondWorkOrder:26,Workload:27,OpX:28,TrimbleUnityMobile:29,TrimbleVegetationManager:30},this.settings={path:"cityworks",secure:!0,expires:null,default_domain:null},this.potential_loads=["general","activity_link","message_queue","gis","search","request","case","case_financial"],void 0!==e&&this.configure(e,t,n)}var n=e.prototype;return n.configure=function(e,t,n){var s=this;if(this.base_url=void 0!==e?e:"cityworksonline",this.settings={path:"cityworks",secure:!0,expires:null,default_domain:null},void 0!==t&&V.forEach(t,function(e,t){void 0!==s.settings[t]&&(s.settings[t]=e)}),void 0===n)this.general=new i(this),this.activity_link=new r(this),this.message_queue=new c(this),this.request=new f(this),this.inspection=new v(this),this.workorder=new y(this),this.case=new g(this);else{var u=this;V.forEach(this.potential_loads,function(e){switch(e){case"general":u.general=new i(u);break;case"activity_link":u.activity_link=new r(u);break;case"message_queue":u.message_queue=new c(u);break;case"gis":u.gis=new o(u);break;case"search":u.search=new a(u);break;case"request":u.request=new f(u);break;case"case":u.case=new g(u);break;case"inspection":u.inspection=new v(u);break;case"workorder":u.workorder=new y(u)}})}},n.runRequest=function(e,n){var i=this;return new Promise(function(s,r){var o={};o.data=JSON.stringify(n),void 0!==i.Token&&""!=i.Token&&"General/Authentication/CityworksOnlineAuthenticate"!=e&&"General/Authentication/Authenticate"!=e&&(o.token=i.Token);var u={hostname:i.base_url,port:443,path:"/"+i.settings.path+"/services/"+e,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Length":Buffer.byteLength(k.stringify(o))},timeout:1e7},c=A.request(u,function(e){var n="";e.on("error",function(e){console.log(e,"Caught on error"),r(new t(13,"Unknown error.",e))}),e.on("data",function(e){n+=e}),e.on("end",function(){try{if(null==(JSON.stringify(n)+"[test string]").match(/\<h2\>Object\ moved\ to/)){var e=JSON.parse(n);void 0===e?r(new t(10,"No response received from Cityworks API.")):void 0!==e&&void 0!==e.Value?s(e):r(new t(3,"Unknown error.",{options:u,postedData:o,api_returned_string:e}))}else r(new t(1,"Error parsing JSON. Cityworks returned HTML.",{response:n}))}catch(e){e instanceof SyntaxError?(console.log("try/catch error on JSON"),r(new t(1,"Error parsing JSON.",{error:e}))):(console.log("try/catch error on JSON"),r(new t(1,"Error parsing JSON.")))}})});c.write(k.stringify(o)),c.end()})},n.authenticate=function(e,n){var i=this;return new Promise(function(s,r){var o="General/Authentication/Authenticate";"cityworksonline"==i.base_url&&(o="General/Authentication/CityworksOnlineAuthenticate"),i.runRequest(o,{LoginName:e,Password:n}).then(function(o){o.Status>0?r(new t(10,o.Message)):void 0!==o.Value&&void 0!==o.Value.Token?(i.login=e,i.password=n,i.Token=o.Value.Token,s(!0)):r(new t(11,"Unknown Error"))}).catch(function(e){r(e)})})},n.authenticateWithGISToken=function(e,t,n,i){var s=this;return this.login=e,this.gisToken=t,this.gisTokenUrl=n,void 0!==i&&(i=12096e5),new Promise(function(e,t){s.runRequest("General/Authentication/AuthenticateGisToken",{LoginName:s.login,GisToken:s.gisToken,GisTokenUrl:s.gisTokenUrl,Expires:i}).then(function(t){void 0!==t.Status&&t.Status>0||(void 0!==t.Value&&void 0!==t.Value.Token?(s.Token=t.Value.Token,e(!0)):e(!1))}).catch(function(e){throw e})})},n.validateToken=function(e,t){var n=this;return new Promise(function(i,s){n.runRequest("General/Authentication/Validate",{Token:e}).then(function(s){s.Status>0?i(!1):(t&&(n.Token=e),i(s.Value))}).catch(function(e){throw e})})},n.setToken=function(e){return""!=e&&null!=e&&(this.Token=e,!0)},n.getToken=function(){return""!=this.Token&&null!=this.Token&&this.Token},n.revokeToken=function(e){var t=this;return new Promise(function(n,i){t.runRequest("General/Token/RevokeUser",{RevokeDate:e}).then(function(e){n(!(void 0!==e.Status&&e.Status>0))}).catch(function(e){throw e})})},n.getLocalizationSettings=function(){var e=this;return new Promise(function(t,n){e.runRequest("General/Localization/LocalizationSettings",{}).then(function(e){t(e.Value)})})},n.getTimezoneOptions=function(){var e=this;return new Promise(function(t,n){e.runRequest("General/Localization/TimeZones",{}).then(function(e){t(e.Value)})})},n.getCurrentLocation=function(){var e=this;return new Promise(function(t,n){e.runRequest("General/AppData/CurrentLocation",{}).then(function(e){t(e.Value)})})},n.licensedApiCheck=function(e,t){var n=this;return new Promise(function(i,s){n.runRequest("General/AppData/SelectedEntities",{Area:e,Service:t}).then(function(e){i(e.Value)})})},n.licensedExtensionCheck=function(e){var n=this;return new Promise(function(i,s){void 0===n.extensions[e]&&s(new t(4,"Extension provided does not exist or is mispelled.",{provided:e,available:n.extensions})),n.runRequest("General/Authorization/LicensedExtensionCheck",{Extension:n.extensions[e]}).then(function(e){i(e.Value)})})},n.licensedExtensionsCheck=function(e){var n=this;return new Promise(function(i,s){var r={Extensions:[]};V.forEach(e,function(e){void 0===n.extensions[e]?s(new t(5,"Extension provided does not exist or is mispelled.",{provided:e,available:n.extensions})):r.Extensions.push(n.extensions[e])}),n.runRequest("General/Authorization/LicensedExtensionsCheck",r).then(function(e){var r={},o=V.invert(n.extensions);V.forEach(e,function(e,i){void 0===o[e]?s(new t(6,"Extension index provided does not exist or isn't configured properly.",{provided_num_returned:e,available:n.extensions})):r[o[e]]=i}),i(r)})})},n.licensedFeatureCheck=function(e){var n=this;return new Promise(function(i,s){void 0===n.features[e]&&s(new t(7,"Feature provided does not exist or is mispelled.",{provided:e,available:n.features})),n.runRequest("General/Authorization/LicensedFeatureCheck",{Feature:n.features[e]}).then(function(e){i(e.Value)})})},n.licensedFeaturesCheck=function(e){var n=this;return new Promise(function(i,s){var r={Features:[]};V.forEach(e,function(e){void 0===n.features[e]?s(new t(8,"Feature provided does not exist or is mispelled.",{provided:e,available:n.features})):r.Features.push(n.features[e])}),n.runRequest("General/Authorization/LicensedFeaturesCheck",r).then(function(e){var r={},o=V.invert(n.features);V.forEach(e.Value,function(e,n){void 0===o[e]?s(new t(9,"Feature index provided does not exist or isn't configured properly.",{provided:e,available:o})):r[o[e]]=n}),i(r)})})},n.licensedServicesCheck=function(e){var t=this;return new Promise(function(n,i){t.runRequest("General/Authorization/LicensedServicesCheck",{Services:e}).then(function(e){n(e.Value)})})},n.cityworksOnlineSites=function(e,t){var n=this;return new Promise(function(i,s){n.runRequest("General/Authentication/CityworksOnlineSites",{LoginName:void 0!==e?e:n.login,Password:void 0!==t?t:n.password}).then(function(e){i(e.Value)})})},n.domains=function(){var e=this;return new Promise(function(t,n){e.runRequest("General/Authentication/Domains",{}).then(function(e){t(e.Value)})})},n.user=function(e){var t=this;return new Promise(function(n,i){t.runRequest("General/Authentication/User",{LoginName:void 0!==e?e:t.login}).then(function(e){n(e.Value)})})},n.version=function(){var e=this;return new Promise(function(t,n){e.runRequest("General/Authentication/Version",{}).then(function(e){t(e.Value)})})},e}();
//# sourceMappingURL=index.m.js.map
